
<!doctype html>
<html lang="ja" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Develop, Release and Operate Container Apps on AWS.">
      
      
      
      
        <link rel="canonical" href="https://aws.github.io/copilot-cli/ja/docs/manifest/lb-web-service/">
      
      <link rel="icon" href="../../../../assets/images/cli.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-7.3.6">
    
    
      
        <title>Load Balanced Web Service - AWS Copilot CLI</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.a57b2b03.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.3f5d1f46.min.css">
        
          
          
          <meta name="theme-color" content="#ffffff">
        
      
    
    
    
      
    
    
    
      <link rel="stylesheet" href="../../../../stylesheets/extra.css">
    
    
      

  


  

  


  <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-7S4JR3KFHK"),document.addEventListener("DOMContentLoaded",function(){"undefined"!=typeof location$&&location$.subscribe(function(t){gtag("config","G-7S4JR3KFHK",{page_path:t.pathname})})})</script>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-7S4JR3KFHK"></script>


    
    



  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="white" data-md-color-accent="">
  
    
    <script>function __prefix(e){return new URL("../../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <!-- Application header -->
<header class="md-header" data-md-component="header">

  <!-- Top-level navigation -->
  <nav class="md-header__inner md-grid" aria-label="ヘッダー">

    <!-- Link to home -->
    <a href="https://aws.github.io/copilot-cli/" title="AWS Copilot CLI" class="md-header__button md-logo" aria-label="AWS Copilot CLI">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M0 2.75C0 1.784.784 1 1.75 1h12.5c.966 0 1.75.784 1.75 1.75v10.5A1.75 1.75 0 0 1 14.25 15H1.75A1.75 1.75 0 0 1 0 13.25V2.75zm1.75-.25a.25.25 0 0 0-.25.25v10.5c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25V2.75a.25.25 0 0 0-.25-.25H1.75zM7.25 8a.75.75 0 0 1-.22.53l-2.25 2.25a.75.75 0 1 1-1.06-1.06L5.44 8 3.72 6.28a.75.75 0 1 1 1.06-1.06l2.25 2.25c.141.14.22.331.22.53zm1.5 1.5a.75.75 0 0 0 0 1.5h3a.75.75 0 0 0 0-1.5h-3z"/></svg>

    </a>

    <!-- Button to open drawer -->
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>

    <!-- Header title -->
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            AWS Copilot CLI
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Load Balanced Web Service
            
          </span>
        </div>
      </div>
    </div>

    <!-- Site language selector -->
    
    <div class="md-header__option"></form>
      <div class="md-select">
        
        <button class="md-header__button md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24z"/></svg>
        </button>
        <div class="md-select__inner">
          <ul class="md-select__list">
            
            <li class="md-select__item">
              <a
                      href="../../../../en/"
                      hreflang="en"
                      class="md-select__link"
              >
                English
              </a>
            </li>
            
            <li class="md-select__item">
              <a
                      href="../../../"
                      hreflang="ja"
                      class="md-select__link"
              >
                日本語
              </a>
            </li>
            
          </ul>
        </div>
      </div>
    </div>
    

    <!-- Button to open search dialogue -->
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>

      <!-- Search interface -->
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="検索" placeholder="検索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="クリア" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            検索を初期化
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    

    <!-- Repository containing source -->
    
      <div class="md-header__source">
        
<a href="https://github.com/aws/copilot-cli/" title="リポジトリへ" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    aws/copilot-cli
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="タブ" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../" class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../overview/" class="md-tabs__link md-tabs__link--active">
        Documentation
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../blogs/release-v133/" class="md-tabs__link">
        Blogs
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../community/get-involved/" class="md-tabs__link">
        Community
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="ナビゲーション" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="AWS Copilot CLI" class="md-nav__button md-logo" aria-label="AWS Copilot CLI" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M0 2.75C0 1.784.784 1 1.75 1h12.5c.966 0 1.75.784 1.75 1.75v10.5A1.75 1.75 0 0 1 14.25 15H1.75A1.75 1.75 0 0 1 0 13.25V2.75zm1.75-.25a.25.25 0 0 0-.25.25v10.5c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25V2.75a.25.25 0 0 0-.25-.25H1.75zM7.25 8a.75.75 0 0 1-.22.53l-2.25 2.25a.75.75 0 1 1-1.06-1.06L5.44 8 3.72 6.28a.75.75 0 1 1 1.06-1.06l2.25 2.25c.141.14.22.331.22.53zm1.5 1.5a.75.75 0 0 0 0 1.5h3a.75.75 0 0 0 0-1.5h-3z"/></svg>

    </a>
    AWS Copilot CLI
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/aws/copilot-cli/" title="リポジトリへ" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    aws/copilot-cli
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../" class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Documentation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Documentation" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Documentation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_2">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Getting Started" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/install/" class="md-nav__link">
        Install Copilot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/verify/" class="md-nav__link">
        (Optional) Verify the installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/first-app-tutorial/" class="md-nav__link">
        Deploy your first application
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" type="checkbox" id="__nav_2_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_3">
          Concepts
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Concepts" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          Concepts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/applications/" class="md-nav__link">
        Applications
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/environments/" class="md-nav__link">
        Environments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/services/" class="md-nav__link">
        Services
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/jobs/" class="md-nav__link">
        Jobs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/pipelines/" class="md-nav__link">
        Pipelines
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../credentials/" class="md-nav__link">
        Credentials
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_5" type="checkbox" id="__nav_2_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2_5">
          Manifest
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Manifest" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_5">
          <span class="md-nav__icon md-icon"></span>
          Manifest
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../backend-service/" class="md-nav__link">
        Backend Service
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Load Balanced Web Service
      </a>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rd-web-service/" class="md-nav__link">
        Request-Driven Web Service
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scheduled-job/" class="md-nav__link">
        Scheduled Job
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../static-site/" class="md-nav__link">
        Static Site
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../worker-service/" class="md-nav__link">
        Worker Service
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environment/" class="md-nav__link">
        Environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pipeline/" class="md-nav__link">
        Pipeline
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_6" type="checkbox" id="__nav_2_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_6">
          Developing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Developing" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_6">
          <span class="md-nav__icon md-icon"></span>
          Developing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_6_1" type="checkbox" id="__nav_2_6_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_6_1">
          Additional AWS Resources
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Additional AWS Resources" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_6_1">
          <span class="md-nav__icon md-icon"></span>
          Additional AWS Resources
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developing/addons/workload/" class="md-nav__link">
        Additional Workload Resources
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developing/addons/environment/" class="md-nav__link">
        Additional Environment Resources
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developing/addons/package/" class="md-nav__link">
        Uploading Local Artifacts
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developing/environment-variables/" class="md-nav__link">
        Container Environment Variables
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developing/content-delivery/" class="md-nav__link">
        Content Delivery
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developing/custom-environment-resources/" class="md-nav__link">
        Custom Environment Resources
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developing/domain/" class="md-nav__link">
        Domain
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_6_6" type="checkbox" id="__nav_2_6_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_6_6">
          Extend Copilot with Overrides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Extend Copilot with Overrides" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_6_6">
          <span class="md-nav__icon md-icon"></span>
          Extend Copilot with Overrides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developing/overrides/yamlpatch/" class="md-nav__link">
        YAML Patch Overrides
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developing/overrides/cdk/" class="md-nav__link">
        CDK Overrides
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developing/overrides/taskdef-overrides/" class="md-nav__link">
        Task Definition Overrides
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developing/internal-albs/" class="md-nav__link">
        Internal Load Balancers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developing/manifest-env-var/" class="md-nav__link">
        Manifest Environment Variables
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developing/observability/" class="md-nav__link">
        Observability
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developing/publish-subscribe/" class="md-nav__link">
        Publish/Subscribe
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developing/secrets/" class="md-nav__link">
        Secrets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developing/svc-to-svc-communication/" class="md-nav__link">
        Service-to-Service Communication
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developing/sidecars/" class="md-nav__link">
        Sidecars
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developing/storage/" class="md-nav__link">
        Storage
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_7" type="checkbox" id="__nav_2_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_7">
          Commands
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Commands" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_7">
          <span class="md-nav__icon md-icon"></span>
          Commands
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_7_1" type="checkbox" id="__nav_2_7_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_7_1">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Getting Started" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_7_1">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/docs/" class="md-nav__link">
        docs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/init/" class="md-nav__link">
        init
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_7_2" type="checkbox" id="__nav_2_7_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_7_2">
          Build
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Build" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_7_2">
          <span class="md-nav__icon md-icon"></span>
          Build
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/app-init/" class="md-nav__link">
        app init
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/app-upgrade/" class="md-nav__link">
        app upgrade
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/app-delete/" class="md-nav__link">
        app delete
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/env-init/" class="md-nav__link">
        env init
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/env-override/" class="md-nav__link">
        env override
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/env-package/" class="md-nav__link">
        env package
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/env-delete/" class="md-nav__link">
        env delete
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/job-init/" class="md-nav__link">
        job init
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/job-override/" class="md-nav__link">
        job override
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/job-package/" class="md-nav__link">
        job package
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/job-delete/" class="md-nav__link">
        job delete
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/svc-init/" class="md-nav__link">
        svc init
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/svc-override/" class="md-nav__link">
        svc override
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/svc-package/" class="md-nav__link">
        svc package
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/svc-delete/" class="md-nav__link">
        svc delete
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/run-local/" class="md-nav__link">
        run local
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_7_3" type="checkbox" id="__nav_2_7_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_7_3">
          Release
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Release" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_7_3">
          <span class="md-nav__icon md-icon"></span>
          Release
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/env-deploy/" class="md-nav__link">
        env deploy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/job-deploy/" class="md-nav__link">
        job deploy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/pipeline-init/" class="md-nav__link">
        pipeline init
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/pipeline-deploy/" class="md-nav__link">
        pipeline deploy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/pipeline-ls/" class="md-nav__link">
        pipeline ls
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/pipeline-override/" class="md-nav__link">
        pipeline override
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/pipeline-show/" class="md-nav__link">
        pipeline show
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/pipeline-status/" class="md-nav__link">
        pipeline status
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/pipeline-delete/" class="md-nav__link">
        pipeline delete
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/svc-deploy/" class="md-nav__link">
        svc deploy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/deploy/" class="md-nav__link">
        deploy
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_7_4" type="checkbox" id="__nav_2_7_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_7_4">
          Operate
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Operate" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_7_4">
          <span class="md-nav__icon md-icon"></span>
          Operate
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/app-ls/" class="md-nav__link">
        app ls
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/app-show/" class="md-nav__link">
        app show
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/env-ls/" class="md-nav__link">
        env ls
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/env-show/" class="md-nav__link">
        env show
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/job-ls/" class="md-nav__link">
        job ls
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/job-logs/" class="md-nav__link">
        job logs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/job-run/" class="md-nav__link">
        job run
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/svc-ls/" class="md-nav__link">
        svc ls
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/svc-show/" class="md-nav__link">
        svc show
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/svc-status/" class="md-nav__link">
        svc status
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/svc-logs/" class="md-nav__link">
        svc logs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/svc-exec/" class="md-nav__link">
        svc exec
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/task-run/" class="md-nav__link">
        task run
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/task-exec/" class="md-nav__link">
        task exec
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/task-delete/" class="md-nav__link">
        task delete
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_7_5" type="checkbox" id="__nav_2_7_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_7_5">
          Extend
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Extend" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_7_5">
          <span class="md-nav__icon md-icon"></span>
          Extend
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/secret-init/" class="md-nav__link">
        secret init
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/storage-init/" class="md-nav__link">
        storage init
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_7_6" type="checkbox" id="__nav_2_7_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_7_6">
          Settings
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Settings" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_7_6">
          <span class="md-nav__icon md-icon"></span>
          Settings
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/version/" class="md-nav__link">
        version
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/completion/" class="md-nav__link">
        completion
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_7_7" type="checkbox" id="__nav_2_7_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_7_7">
          All
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="All" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_7_7">
          <span class="md-nav__icon md-icon"></span>
          All
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/app-delete/" class="md-nav__link">
        app delete
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/app-init/" class="md-nav__link">
        app init
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/app-ls/" class="md-nav__link">
        app ls
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/app-show/" class="md-nav__link">
        app show
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/app-upgrade/" class="md-nav__link">
        app upgrade
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/completion/" class="md-nav__link">
        completion
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/deploy/" class="md-nav__link">
        deploy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/docs/" class="md-nav__link">
        docs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/env-delete/" class="md-nav__link">
        env delete
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/env-deploy/" class="md-nav__link">
        env deploy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/env-init/" class="md-nav__link">
        env init
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/env-ls/" class="md-nav__link">
        env ls
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/env-override/" class="md-nav__link">
        env override
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/env-package/" class="md-nav__link">
        env package
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/env-show/" class="md-nav__link">
        env show
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/init/" class="md-nav__link">
        init
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/job-delete/" class="md-nav__link">
        job delete
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/job-deploy/" class="md-nav__link">
        job deploy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/job-init/" class="md-nav__link">
        job init
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/job-logs/" class="md-nav__link">
        job logs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/job-ls/" class="md-nav__link">
        job ls
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/job-override/" class="md-nav__link">
        job override
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/job-package/" class="md-nav__link">
        job package
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/job-run/" class="md-nav__link">
        job run
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/pipeline-delete/" class="md-nav__link">
        pipeline delete
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/pipeline-deploy/" class="md-nav__link">
        pipeline deploy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/pipeline-init/" class="md-nav__link">
        pipeline init
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/pipeline-ls/" class="md-nav__link">
        pipeline ls
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/pipeline-override/" class="md-nav__link">
        pipeline override
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/pipeline-show/" class="md-nav__link">
        pipeline show
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/pipeline-status/" class="md-nav__link">
        pipeline status
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/run-local/" class="md-nav__link">
        run local
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/secret-init/" class="md-nav__link">
        secret init
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/storage-init/" class="md-nav__link">
        storage init
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/svc-delete/" class="md-nav__link">
        svc delete
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/svc-deploy/" class="md-nav__link">
        svc deploy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/svc-exec/" class="md-nav__link">
        svc exec
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/svc-init/" class="md-nav__link">
        svc init
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/svc-logs/" class="md-nav__link">
        svc logs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/svc-ls/" class="md-nav__link">
        svc ls
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/svc-override/" class="md-nav__link">
        svc override
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/svc-package/" class="md-nav__link">
        svc package
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/svc-show/" class="md-nav__link">
        svc show
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/svc-status/" class="md-nav__link">
        svc status
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/svc-pause/" class="md-nav__link">
        svc pause
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/svc-resume/" class="md-nav__link">
        svc resume
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/task-delete/" class="md-nav__link">
        task delete
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/task-exec/" class="md-nav__link">
        task exec
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/task-run/" class="md-nav__link">
        task run
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/version/" class="md-nav__link">
        version
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Blogs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Blogs" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Blogs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/release-v133/" class="md-nav__link">
        Release v1.33
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/release-v132/" class="md-nav__link">
        Release v1.32
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/release-v131/" class="md-nav__link">
        Release v1.31
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/release-v130/" class="md-nav__link">
        Release v1.30
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/release-v129/" class="md-nav__link">
        Release v1.29
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/release-v128/" class="md-nav__link">
        Release v1.28
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/release-v127/" class="md-nav__link">
        Release v1.27
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/apprunner-waf/" class="md-nav__link">
        AWS App Runner WAF
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/release-v126/" class="md-nav__link">
        Release v1.26
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/release-v125/" class="md-nav__link">
        Release v1.25
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/release-v124/" class="md-nav__link">
        Release v1.24
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/release-v123/" class="md-nav__link">
        Release v1.23
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/release-v122/" class="md-nav__link">
        Release v1.22
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/release-v121/" class="md-nav__link">
        Release v1.21
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/release-v120/" class="md-nav__link">
        Release v1.20
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/apprunner-vpc/" class="md-nav__link">
        AWS App Runner VPC
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/release-v119/" class="md-nav__link">
        Release v1.19
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/release-v118/" class="md-nav__link">
        Release v1.18
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/release-v117/" class="md-nav__link">
        Release v1.17
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/release-v116/" class="md-nav__link">
        Release v1.16
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Community
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Community" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Community
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/get-involved/" class="md-nav__link">
        Get Involved
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/guides/" class="md-nav__link">
        Guides and Resources
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/aws/copilot-cli/edit/mainline/site/content/docs/manifest/lb-web-service.ja.md" title="編集" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  <h1>Load Balanced Web Service</h1>
                
                <p>以下は <code>'Load Balanced Web Service'</code> Manifest で利用できるすべてのプロパティのリストです。<a href="../../concepts/services/">Copilot Service の概念</a>説明のページも合わせてご覧ください。</p>
<details class="note" open="open"><summary>インターネット向け Service のサンプル Manifest</summary><div class="tabbed-set tabbed-alternate" data-tabs="1:9"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><input id="__tabbed_1_4" name="__tabbed_1" type="radio" /><input id="__tabbed_1_5" name="__tabbed_1" type="radio" /><input id="__tabbed_1_6" name="__tabbed_1" type="radio" /><input id="__tabbed_1_7" name="__tabbed_1" type="radio" /><input id="__tabbed_1_8" name="__tabbed_1" type="radio" /><input id="__tabbed_1_9" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Basic</label><label for="__tabbed_1_2">With a domain</label><label for="__tabbed_1_3">Larger containers</label><label for="__tabbed_1_4">Autoscaling</label><label for="__tabbed_1_5">Event-driven</label><label for="__tabbed_1_6">Network Load Balancer</label><label for="__tabbed_1_7">Shared file system</label><label for="__tabbed_1_8">End-to-end encryption</label><label for="__tabbed_1_9">Expose Multiple Ports</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">name</span><span class="p">:</span> <span class="s">&#39;frontend&#39;</span>
<span class="nt">type</span><span class="p">:</span> <span class="s">&#39;Load</span><span class="nv"> </span><span class="s">Balanced</span><span class="nv"> </span><span class="s">Web</span><span class="nv"> </span><span class="s">Service&#39;</span>

<span class="nt">image</span><span class="p">:</span>
  <span class="nt">build</span><span class="p">:</span> <span class="s">&#39;./frontend/Dockerfile&#39;</span>
  <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8080</span>

<span class="nt">http</span><span class="p">:</span>
  <span class="nt">path</span><span class="p">:</span> <span class="s">&#39;/&#39;</span>
  <span class="nt">healthcheck</span><span class="p">:</span> <span class="s">&#39;/_healthcheck&#39;</span>

<span class="nt">cpu</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">256</span>
<span class="nt">memory</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">512</span>
<span class="nt">count</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="nt">exec</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="nt">variables</span><span class="p">:</span>
  <span class="nt">LOG_LEVEL</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">info</span>
<span class="nt">secrets</span><span class="p">:</span>
  <span class="nt">GITHUB_TOKEN</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">GITHUB_TOKEN</span>
  <span class="nt">DB_SECRET</span><span class="p">:</span>
    <span class="nt">secretsmanager</span><span class="p">:</span> <span class="s">&#39;mysql&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">name</span><span class="p">:</span> <span class="s">&#39;frontend&#39;</span>
<span class="nt">type</span><span class="p">:</span> <span class="s">&#39;Load</span><span class="nv"> </span><span class="s">Balanced</span><span class="nv"> </span><span class="s">Web</span><span class="nv"> </span><span class="s">Service&#39;</span>

<span class="nt">image</span><span class="p">:</span>
  <span class="nt">build</span><span class="p">:</span> <span class="s">&#39;./frontend/Dockerfile&#39;</span>
  <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8080</span>

<span class="nt">http</span><span class="p">:</span>
  <span class="nt">path</span><span class="p">:</span> <span class="s">&#39;/&#39;</span>
  <span class="nt">alias</span><span class="p">:</span> <span class="s">&#39;example.com&#39;</span>

<span class="nt">environments</span><span class="p">:</span>
  <span class="nt">qa</span><span class="p">:</span>
    <span class="nt">http</span><span class="p">:</span>
      <span class="nt">alias</span><span class="p">:</span> <span class="c1"># 証明書インポート済みの &quot;qa&quot; Environment</span>
        <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&#39;qa.example.com&#39;</span>
          <span class="nt">hosted_zone</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Z0873220N255IR3MTNR4</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># 例えば、外部からのトラフィックを受け入れる前に、Java サービスをウォームアップしておきたい場合など。</span>
<span class="nt">name</span><span class="p">:</span> <span class="s">&#39;frontend&#39;</span>
<span class="nt">type</span><span class="p">:</span> <span class="s">&#39;Load</span><span class="nv"> </span><span class="s">Balanced</span><span class="nv"> </span><span class="s">Web</span><span class="nv"> </span><span class="s">Service&#39;</span>

<span class="nt">image</span><span class="p">:</span>
  <span class="nt">build</span><span class="p">:</span>
    <span class="nt">dockerfile</span><span class="p">:</span> <span class="s">&#39;./frontend/Dockerfile&#39;</span>
    <span class="nt">context</span><span class="p">:</span> <span class="s">&#39;./frontend&#39;</span>
  <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">80</span>

<span class="nt">http</span><span class="p">:</span>
  <span class="nt">path</span><span class="p">:</span> <span class="s">&#39;/&#39;</span>
  <span class="nt">healthcheck</span><span class="p">:</span>
    <span class="nt">path</span><span class="p">:</span> <span class="s">&#39;/_deephealthcheck&#39;</span>
    <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8080</span>
    <span class="nt">success_codes</span><span class="p">:</span> <span class="s">&#39;200,301&#39;</span>
    <span class="nt">healthy_threshold</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">4</span>
    <span class="nt">unhealthy_threshold</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
    <span class="nt">interval</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">15s</span>
    <span class="nt">timeout</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10s</span>
    <span class="nt">grace_period</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2m</span>
  <span class="nt">deregistration_delay</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">50s</span>
  <span class="nt">stickiness</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="nt">allowed_source_ips</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="s">&quot;10.24.34.0/23&quot;</span><span class="p p-Indicator">]</span>

<span class="nt">cpu</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2048</span>
<span class="nt">memory</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">4096</span>
<span class="nt">count</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="nt">storage</span><span class="p">:</span>
  <span class="nt">ephemeral</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">100</span>

<span class="nt">network</span><span class="p">:</span>
  <span class="nt">vpc</span><span class="p">:</span>
    <span class="nt">placement</span><span class="p">:</span> <span class="s">&#39;private&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">name</span><span class="p">:</span> <span class="s">&#39;frontend&#39;</span>
<span class="nt">type</span><span class="p">:</span> <span class="s">&#39;Load</span><span class="nv"> </span><span class="s">Balanced</span><span class="nv"> </span><span class="s">Web</span><span class="nv"> </span><span class="s">Service&#39;</span>

<span class="nt">http</span><span class="p">:</span>
  <span class="nt">path</span><span class="p">:</span> <span class="s">&#39;/&#39;</span>
<span class="nt">image</span><span class="p">:</span>
  <span class="nt">location</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">aws_account_id.dkr.ecr.us-west-2.amazonaws.com/frontend:latest</span>
  <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">80</span>

<span class="nt">cpu</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">512</span>
<span class="nt">memory</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1024</span>
<span class="nt">count</span><span class="p">:</span>
  <span class="nt">range</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1-10</span> 
  <span class="nt">cooldown</span><span class="p">:</span>
    <span class="nt">in</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">60s</span>
    <span class="nt">out</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">30s</span>
  <span class="nt">cpu_percentage</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">70</span>
  <span class="nt">requests</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">30</span>
  <span class="nt">response_time</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2s</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># https://aws.github.io/copilot-cli/docs/developing/publish-subscribe/ を参照してください。</span>
<span class="nt">name</span><span class="p">:</span> <span class="s">&#39;orders&#39;</span>
<span class="nt">type</span><span class="p">:</span> <span class="s">&#39;Load</span><span class="nv"> </span><span class="s">Balanced</span><span class="nv"> </span><span class="s">Web</span><span class="nv"> </span><span class="s">Service&#39;</span>

<span class="nt">image</span><span class="p">:</span>
  <span class="nt">build</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Dockerfile</span>
  <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">80</span>
<span class="nt">http</span><span class="p">:</span>
  <span class="nt">path</span><span class="p">:</span> <span class="s">&#39;/&#39;</span>
  <span class="nt">alias</span><span class="p">:</span> <span class="s">&#39;orders.example.com&#39;</span>

<span class="nt">variables</span><span class="p">:</span>
  <span class="nt">DDB_TABLE_NAME</span><span class="p">:</span> <span class="s">&#39;orders&#39;</span>

<span class="nt">publish</span><span class="p">:</span>
  <span class="nt">topics</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&#39;products&#39;</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&#39;orders&#39;</span>
      <span class="nt">fifo</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">name</span><span class="p">:</span> <span class="s">&#39;frontend&#39;</span>
<span class="nt">type</span><span class="p">:</span> <span class="s">&#39;Load</span><span class="nv"> </span><span class="s">Balanced</span><span class="nv"> </span><span class="s">Web</span><span class="nv"> </span><span class="s">Service&#39;</span>

<span class="nt">image</span><span class="p">:</span>
  <span class="nt">build</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Dockerfile</span>
  <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8080</span>

<span class="nt">http</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">nlb</span><span class="p">:</span>
  <span class="nt">alias</span><span class="p">:</span> <span class="s">&#39;example.com&#39;</span>
  <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">80/tcp</span>
  <span class="nt">target_container</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">envoy</span>

<span class="nt">network</span><span class="p">:</span>
  <span class="nt">vpc</span><span class="p">:</span>
    <span class="nt">placement</span><span class="p">:</span> <span class="s">&#39;private&#39;</span>

<span class="nt">sidecars</span><span class="p">:</span>
  <span class="nt">envoy</span><span class="p">:</span>
    <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">80</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">aws_account_id.dkr.ecr.us-west-2.amazonaws.com/envoy:latest</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># http://localhost:8000/copilot-cli/docs/developing/storage.ja.md#ファイルシステム を参照してください。</span>
<span class="nt">name</span><span class="p">:</span> <span class="s">&#39;frontend&#39;</span>
<span class="nt">type</span><span class="p">:</span> <span class="s">&#39;Load</span><span class="nv"> </span><span class="s">Balanced</span><span class="nv"> </span><span class="s">Web</span><span class="nv"> </span><span class="s">Service&#39;</span>

<span class="nt">image</span><span class="p">:</span>
  <span class="nt">build</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Dockerfile</span>
  <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">80</span>
  <span class="nt">depends_on</span><span class="p">:</span>
    <span class="nt">bootstrap</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">success</span>

<span class="nt">http</span><span class="p">:</span>
  <span class="nt">path</span><span class="p">:</span> <span class="s">&#39;/&#39;</span>

<span class="nt">storage</span><span class="p">:</span>
  <span class="nt">volumes</span><span class="p">:</span>
    <span class="nt">wp</span><span class="p">:</span>
      <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/bitnami/wordpress</span>
      <span class="nt">read_only</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
      <span class="nt">efs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="c1"># ブートストラップコンテナを使って、ファイルシステム内のコンテンツを用意しておきます。</span>
<span class="nt">sidecars</span><span class="p">:</span>
  <span class="nt">bootstrap</span><span class="p">:</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">aws_account_id.dkr.ecr.us-west-2.amazonaws.com/bootstrap:v1.0.0</span>
    <span class="nt">essential</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
    <span class="nt">mount_points</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">source_volume</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">wp</span>
        <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/bitnami/wordpress</span>
        <span class="nt">read_only</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">name</span><span class="p">:</span> <span class="s">&#39;frontend&#39;</span>
<span class="nt">type</span><span class="p">:</span> <span class="s">&#39;Load</span><span class="nv"> </span><span class="s">Balanced</span><span class="nv"> </span><span class="s">Web</span><span class="nv"> </span><span class="s">Service&#39;</span>

<span class="nt">image</span><span class="p">:</span>
  <span class="nt">build</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Dockerfile</span>
  <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8080</span>

<span class="nt">http</span><span class="p">:</span>
  <span class="nt">alias</span><span class="p">:</span> <span class="s">&#39;example.com&#39;</span>
  <span class="nt">path</span><span class="p">:</span> <span class="s">&#39;/&#39;</span>
  <span class="nt">healthcheck</span><span class="p">:</span>
    <span class="nt">path</span><span class="p">:</span> <span class="s">&#39;/_health&#39;</span>

  <span class="c1"># プロトコルでの指定の結果により、envoy コンテナのポートは 443 です。ヘルチェックプロトコルは `HTTPS` になります。</span>
  <span class="c1"># ロードバランサーは Fargate タスクと TLS 接続します。envoy コンテナに</span>
  <span class="c1"># インストールした証明書が利用されます。それらの証明書は自己証明書です。</span>
  <span class="nt">target_container</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">envoy</span>

<span class="nt">sidecars</span><span class="p">:</span>
  <span class="nt">envoy</span><span class="p">:</span>
    <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">443</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">aws_account_id.dkr.ecr.us-west-2.amazonaws.com/envoy-proxy-with-selfsigned-certs:v1</span>

<span class="nt">network</span><span class="p">:</span>
  <span class="nt">vpc</span><span class="p">:</span>
    <span class="nt">placement</span><span class="p">:</span> <span class="s">&#39;private&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">name</span><span class="p">:</span> <span class="s">&#39;frontend&#39;</span>
<span class="nt">type</span><span class="p">:</span> <span class="s">&#39;Load</span><span class="nv"> </span><span class="s">Balanced</span><span class="nv"> </span><span class="s">Web</span><span class="nv"> </span><span class="s">Service&#39;</span>

<span class="nt">image</span><span class="p">:</span>
  <span class="nt">build</span><span class="p">:</span> <span class="s">&#39;./frontend/Dockerfile&#39;</span>
  <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8080</span>

<span class="nt">nlb</span><span class="p">:</span>
  <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8080/tcp</span>              <span class="c1"># Traffic on port 8080/tcp is forwarded to the main container, on port 8080.</span>
  <span class="nt">additional_listeners</span><span class="p">:</span>  
    <span class="p p-Indicator">-</span> <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8084/tcp</span>          <span class="c1"># Traffic on port 8084/tcp is forwarded to the main container, on port 8084.</span>
    <span class="p p-Indicator">-</span> <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8085/tcp</span>          <span class="c1"># Traffic on port 8085/tcp is forwarded to the sidecar &quot;envoy&quot;, on port 3000.</span>
      <span class="nt">target_port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">3000</span>         
      <span class="nt">target_container</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">envoy</span>   

<span class="nt">http</span><span class="p">:</span>
  <span class="nt">path</span><span class="p">:</span> <span class="s">&#39;/&#39;</span>
  <span class="nt">target_port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8083</span>           <span class="c1"># Traffic on &quot;/&quot; is forwarded to the main container, on port 8083. </span>
  <span class="nt">additional_rules</span><span class="p">:</span> 
    <span class="p p-Indicator">-</span> <span class="nt">path</span><span class="p">:</span> <span class="s">&#39;customerdb&#39;</span>
      <span class="nt">target_port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8081</span>       <span class="c1"># Traffic on &quot;/customerdb&quot; is forwarded to the main container, on port 8083.  </span>
    <span class="p p-Indicator">-</span> <span class="nt">path</span><span class="p">:</span> <span class="s">&#39;admin&#39;</span>
      <span class="nt">target_port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8082</span>       <span class="c1"># Traffic on &quot;/admin&quot; is forwarded to the sidecar &quot;envoy&quot;, on port 8082.</span>
      <span class="nt">target_container</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">envoy</span>    

<span class="nt">sidecars</span><span class="p">:</span>
  <span class="nt">envoy</span><span class="p">:</span>
    <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">80</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">aws_account_id.dkr.ecr.us-west-2.amazonaws.com/envoy-proxy-with-selfsigned-certs:v1</span>
</code></pre></div>
</div>
</div>
</div>
</details>
<p><a id="name" href="#name" class="field"><code>name</code></a> <span class="type">String</span><br />
Service の名前。</p>
<div class="separator"></div>

<p><a id="type" href="#type" class="field"><code>type</code></a> <span class="type">String</span><br />
Service のアーキテクチャタイプ。 <a href="../../concepts/services/#load-balanced-web-service">Load Balanced Web Service</a> は、ロードバランサー及び AWS Fargate 上の Amazon ECS によって構成される、インターネットに公開するための Service です。</p>
<div class="separator"></div>

<p><a id="http" href="#http" class="field"><code>http</code></a> <span class="type">Boolean or Map</span>
http セクションは Application Load Balancer と Service との連携に関するパラメータを含みます。</p>
<p>Application Load Balancer を無効化する場合は、 <code>http: false</code> と指定します。 Load Balanced Web Service では、Application Load Balancer または、Network Load Balancer が少なくとも 1 つ有効となっていなければならない事に注意してください。 </p>
<p><span class="parent-field">http.</span><a id="http-path" href="#http-path" class="field"><code>path</code></a> <span class="type">String</span><br />
このパスに到着したリクエストが、Service に転送されます。各リスナールールは一意のパスでリクエストを受け付ける必要があります。</p>
<p><span class="parent-field">http.</span><a id="http-alb" href="#http-alb" class="field"><code>alb</code></a> <span class="type">String</span> <span class="version"><a href="../../../blogs/release-v132/#imported-albs">v1.32.0</a> にて追加</span><br />
インポートする既存のインターネット向け ALB の ARN または ALB 名。リスナーにリスナールールが追加されます。Copilot は証明書などの DNS 関連リソースを管理しません。</p>
<p><span class="parent-field">http.</span><a id="http-healthcheck" href="#http-healthcheck" class="field"><code>healthcheck</code></a> <span class="type">String or Map</span><br />
文字列を指定した場合、Copilot は、ターゲットグループからのヘルスチェックリクエストを処理するためにコンテナが公開しているパスと解釈します。デフォルトは "/" です。
<div class="highlight"><pre><span></span><code><span class="nt">http</span><span class="p">:</span>
  <span class="nt">healthcheck</span><span class="p">:</span> <span class="s">&#39;/&#39;</span>
</code></pre></div>
あるいは以下のように Map によるヘルスチェックも指定可能です。
<div class="highlight"><pre><span></span><code><span class="nt">http</span><span class="p">:</span>
  <span class="nt">healthcheck</span><span class="p">:</span>
    <span class="nt">path</span><span class="p">:</span> <span class="s">&#39;/&#39;</span>
    <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8080</span>
    <span class="nt">success_codes</span><span class="p">:</span> <span class="s">&#39;200&#39;</span>
    <span class="nt">healthy_threshold</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">3</span>
    <span class="nt">unhealthy_threshold</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
    <span class="nt">interval</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">15s</span>
    <span class="nt">timeout</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10s</span>
    <span class="nt">grace_period</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">60s</span>
</code></pre></div></p>
<p><span class="parent-field">http.healthcheck.</span><a id="http-healthcheck-path" href="#http-healthcheck-path" class="field"><code>path</code></a> <span class="type">String</span><br />
ヘルスチェックリクエスト送信先。</p>
<p><span class="parent-field">http.healthcheck.</span><a id="http-healthcheck-port" href="#http-healthcheck-port" class="field"><code>port</code></a> <span class="type">Integer</span>
ヘルスチェックリクエストを送信するポート。デフォルト値は、<a href="./#image-port"><code>image.port</code></a> です。<a href="./#http-target-container"><code>http.target_container</code></a>で公開ポートが設定されている場合、公開しているポートが設定されます。<br />
ポートが <code>443</code> で公開されている場合、 ヘルスチェックは自動で HTTPS に設定されます。</p>
<p><span class="parent-field">http.healthcheck.</span><a id="http-healthcheck-success-codes" href="#http-healthcheck-success-codes" class="field"><code>success_codes</code></a> <span class="type">String</span><br />
healthy なターゲットがヘルスチェックに対して返す HTTP ステータスコードを指定します。200 から 499 の範囲で指定可能です。また、"200,202" のように複数の値を指定することや "200-299" のような値の範囲指定も可能です。デフォルト値は 200 です。</p>
<p><span class="parent-field">http.healthcheck.</span><a id="http-healthcheck-healthy-threshold" href="#http-healthcheck-healthy-threshold" class="field"><code>healthy_threshold</code></a> <span class="type">Integer</span><br />
unhealthy なターゲットを healthy とみなすために必要な、連続したヘルスチェックの成功回数を指定します。デフォルト値は 5 で、設定可能な範囲は、2 〜 10 です。</p>
<p><span class="parent-field">http.healthcheck.</span><a id="http-healthcheck-unhealthy-threshold" href="#http-healthcheck-unhealthy-threshold" class="field"><code>unhealthy_threshold</code></a> <span class="type">Integer</span><br />
ターゲットが unhealthy であると判断するまでに必要な、連続したヘルスチェックの失敗回数を指定します。デフォルト値は 2 で、設定可能な範囲は、2 〜 10 です。</p>
<p><span class="parent-field">http.healthcheck.</span><a id="http-healthcheck-interval" href="#http-healthcheck-interval" class="field"><code>interval</code></a> <span class="type">Duration</span><br />
個々のターゲットへのヘルスチェックを行う際の、おおよその間隔を秒単位で指定します。デフォルト値は 30 秒で、設定可能な範囲は、5 〜 300 です。</p>
<p><span class="parent-field">http.healthcheck.</span><a id="http-healthcheck-timeout" href="#http-healthcheck-timeout" class="field"><code>timeout</code></a> <span class="type">Duration</span><br />
ターゲットからの応答がない場合、ヘルスチェックが失敗したとみなすまでの時間を秒単位で指定します。デフォルト値は 5 秒で、設定可能な範囲は、5 〜 300 です。</p>
<p><span class="parent-field">http.healthcheck.</span><a id="http-healthcheck-grace-period" href="#http-healthcheck-grace-period" class="field"><code>grace_period</code></a> <span class="type">Duration</span><br />
コンテナ起動時にターゲットグループのヘルスチェックが失敗した場合の、それを無視する時間を指定します。デフォルトは 60 秒です。これは、healthy であることを担保しながら着信を待機するまでに時間がかかるコンテナのデプロイ時の問題を修正したり、迅速な起動が保証されているコンテナのデプロイを高速化したりするのに役立ちます。</p>
<p><span class="parent-field">http.</span><a id="http-deregistration-delay" href="#http-deregistration-delay" class="field"><code>deregistration_delay</code></a> <span class="type">Duration</span>  </p>
<p>登録解除時にターゲットがクライアントとの接続を閉じるのを待つ時間を指定します。デフォルトでは 60 秒です。この値を大きくするとターゲットが安全に接続を閉じるための時間を確保できますが、新バージョンのデプロイに必要となる時間が長くなります。範囲は 0 〜 3600 です。</p>
<p><span class="parent-field">http.</span><a id="http-target-container" href="#http-target-container" class="field"><code>target_container</code></a> <span class="type">String</span><br />
サイドカーコンテナを指定することで、Service のメインコンテナの代わりにサイドカーでロードバランサーからのリクエストを受け取れます。
ターゲットコンテナのポートが <code>443</code> に設定されている場合、プロトコルは <code>HTTP</code> に設定され、ロードバランサーは
Fargate タスクと TLS 接続します。ターゲットコンテナにインストールされた証明書が利用されます。</p>
<p><span class="parent-field">http.</span><a id="http-target-port" href="#http-target-port" class="field"><code>target_port</code></a> <span class="type">String</span><br />
任意項目。トラフィックを受信するコンテナポート。デフォルトでは、ターゲットコンテナがメインコンテナの場合、<code>image.port</code> 、
ターゲットコンテナがサイドカーの場合は、<code>sidecars.&lt;name&gt;.port</code> です。</p>
<p><span class="parent-field">http.</span><a id="http-stickiness" href="#http-stickiness" class="field"><code>stickiness</code></a> <span class="type">Boolean</span><br />
スティッキーセッションの有効化、あるいは無効化を指定します。</p>
<p><span class="parent-field">http.</span><a id="http-allowed-source-ips" href="#http-allowed-source-ips" class="field"><code>allowed_source_ips</code></a> <span class="type">Array of Strings</span><br />
Service へのアクセスを許可する CIDR IP アドレスのリストを指定します。
<div class="highlight"><pre><span></span><code><span class="nt">http</span><span class="p">:</span>
  <span class="nt">allowed_source_ips</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="s">&quot;192.0.2.0/24&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;198.51.100.10/32&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div></p>
<p><span class="parent-field">http.</span><a id="http-alias" href="#http-alias" class="field"><code>alias</code></a> <span class="type">String or Array of Strings or Array of Maps</span><br />
Service の HTTPS ドメインエイリアス。
<div class="highlight"><pre><span></span><code><span class="c1"># String version.</span>
<span class="nt">http</span><span class="p">:</span>
  <span class="nt">alias</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">example.com</span>
<span class="c1"># Alternatively, as an array of strings.</span>
<span class="nt">http</span><span class="p">:</span>
  <span class="nt">alias</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="s">&quot;example.com&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;v1.example.com&quot;</span><span class="p p-Indicator">]</span>
<span class="c1"># Alternatively, as an array of maps.</span>
<span class="nt">http</span><span class="p">:</span>
  <span class="nt">alias</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">example.com</span>
      <span class="nt">hosted_zone</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Z0873220N255IR3MTNR4</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1.example.com</span>
      <span class="nt">hosted_zone</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AN0THE9H05TED20NEID</span>
</code></pre></div>
<span class="parent-field">http.</span><a id="http-hosted-zone" href="#http-hosted-zone" class="field"><code>hosted_zone</code></a> <span class="type">String</span><br />
既存のプライベートホストゾーンの ID。<code>http.alias</code> とのみ使用可能です。証明書をインポートした Environment がある場合、ロードバランサーの作成後に Copilot が A レコードを挿入するホストゾーンを指定できます。
<div class="highlight"><pre><span></span><code><span class="nt">http</span><span class="p">:</span>
  <span class="nt">alias</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">example.com</span>
  <span class="nt">hosted_zone</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Z0873220N255IR3MTNR4</span>
<span class="c1"># Also see http.alias array of maps example, above.</span>
</code></pre></div>
<span class="parent-field">http.</span><a id="http-redirect-to-https" href="#http-redirect-to-https" class="field"><code>redirect_to_https</code></a> <span class="type">Boolean</span>
Application Load Balancer で、HTTP から HTTPS へ自動的にリダイレクトします。デフォルトは <code>true</code> です。</p>
<p><span class="parent-field">http.</span><a id="http-version" href="#http-version" class="field"><code>version</code></a> <span class="type">String</span><br />
HTTP(S) プロトコルのバージョン。 <code>'grpc'</code>、 <code>'http1'</code>、または <code>'http2'</code> を指定します。省略した場合は、<code>'http1'</code> が利用されます。 
gRPC を利用する場合は、Application にドメインが関連付けられていなければなりません。</p>
<p><span class="parent-field">http.</span><a id="http-additional-rules" href="#http-additional-rules" class="field"><code>additional_rules</code></a> <span class="type">Array of Maps</span><br />
複数の ALB リスナールール設定します。</p>
<p><span class="parent-field">http.additional_rules.</span><a id="http-additional-rules-path" href="#http-additional-rules-path" class="field"><code>path</code></a> <span class="type">String</span><br />
    Requests to this path will be forwarded to your service. Each listener rule should listen on a unique path.</p>
<p><span class="parent-field">http.additional_rules.</span><a id="http-additional-rules-healthcheck" href="#http-additional-rules-healthcheck" class="field"><code>healthcheck</code></a> <span class="type">String or Map</span><br />
    If you specify a string, Copilot interprets it as the path exposed in your container to handle target group health check requests. The default is "/".
    <div class="highlight"><pre><span></span><code><span class="nt">http</span><span class="p">:</span>
  <span class="nt">additional_rules</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">healthcheck</span><span class="p">:</span> <span class="s">&#39;/&#39;</span>
</code></pre></div>
    You can also specify healthcheck as a map:
    <div class="highlight"><pre><span></span><code><span class="nt">http</span><span class="p">:</span>
  <span class="nt">additional_rules</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">healthcheck</span><span class="p">:</span>
        <span class="nt">path</span><span class="p">:</span> <span class="s">&#39;/&#39;</span>
        <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8080</span>
        <span class="nt">success_codes</span><span class="p">:</span> <span class="s">&#39;200&#39;</span>
        <span class="nt">healthy_threshold</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">3</span>
        <span class="nt">unhealthy_threshold</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
        <span class="nt">interval</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">15s</span>
        <span class="nt">timeout</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10s</span>
</code></pre></div></p>
<p><span class="parent-field">http.additional_rules.healthcheck.</span><a id="http-additional-rules-healthcheck-path" href="#http-additional-rules-healthcheck-path" class="field"><code>path</code></a> <span class="type">String</span><br />
    The destination that the health check requests are sent to.</p>
<p><span class="parent-field">http.additional_rules.healthcheck.</span><a id="http-additional-rules-healthcheck-port" href="#http-additional-rules-healthcheck-port" class="field"><code>port</code></a> <span class="type">Integer</span><br />
    The port that the health check requests are sent to. The default is <a href="./#image-port"><code>image.port</code></a>, or the port exposed by <a href="./#http-target-container"><code>http.target_container</code></a>, if set.<br />
    If the port exposed is <code>443</code>, then the health check protocol is automatically set to HTTPS.</p>
<p><span class="parent-field">http.additional_rules.healthcheck.</span><a id="http-additional-rules-healthcheck-success-codes" href="#http-additional-rules-healthcheck-success-codes" class="field"><code>success_codes</code></a> <span class="type">String</span><br />
    The HTTP status codes that healthy targets must use when responding to an HTTP health check. You can specify values between 200 and 499. You can specify multiple values (for example, "200,202") or a range of values (for example, "200-299"). The default is 200.</p>
<p><span class="parent-field">http.additional_rules.healthcheck.</span><a id="http-additional-rules-healthcheck-healthy-threshold" href="#http-additional-rules-healthcheck-healthy-threshold" class="field"><code>healthy_threshold</code></a> <span class="type">Integer</span><br />
    The number of consecutive health check successes required before considering an unhealthy target healthy. The default is 5. Range: 2-10.</p>
<p><span class="parent-field">http.additional_rules.healthcheck.</span><a id="http-additional-rules-healthcheck-unhealthy-threshold" href="#http-additional-rules-healthcheck-unhealthy-threshold" class="field"><code>unhealthy_threshold</code></a> <span class="type">Integer</span><br />
    The number of consecutive health check failures required before considering a target unhealthy. The default is 2. Range: 2-10.</p>
<p><span class="parent-field">http.additional_rules.healthcheck.</span><a id="http-additional-rules-healthcheck-interval" href="#http-additional-rules-healthcheck-interval" class="field"><code>interval</code></a> <span class="type">Duration</span><br />
    The approximate amount of time, in seconds, between health checks of an individual target. The default is 30s. Range: 5s–300s.</p>
<p><span class="parent-field">http.additional_rules.healthcheck.</span><a id="http-additional-rules-healthcheck-timeout" href="#http-additional-rules-healthcheck-timeout" class="field"><code>timeout</code></a> <span class="type">Duration</span><br />
    The amount of time, in seconds, during which no response from a target means a failed health check. The default is 5s. Range 5s-300s.</p>
<p><span class="parent-field">http.additional_rules.</span><a id="http-additional-rules-deregistration-delay" href="#http-additional-rules-deregistration-delay" class="field"><code>deregistration_delay</code></a> <span class="type">Duration</span><br />
    The amount of time to wait for targets to drain connections during deregistration. The default is 60s. Setting this to a larger value gives targets more time to gracefully drain connections, but increases the time required for new deployments. Range 0s-3600s.</p>
<p><span class="parent-field">http.additional_rules.</span><a id="http-additional-rules-target-container" href="#http-additional-rules-target-container" class="field"><code>target_container</code></a> <span class="type">String</span><br />
    A sidecar container that requests are routed to instead of the main service container.<br />
    If the target container's port is set to <code>443</code>, then the protocol is set to <code>HTTPS</code> so that the load balancer establishes
    TLS connections with the Fargate tasks using certificates that you install on the target container.</p>
<p><span class="parent-field">http.additional_rules.</span><a id="http-additional-rules-target-port" href="#http-additional-rules-target-port" class="field"><code>target_port</code></a> <span class="type">String</span><br />
    The container port that receives traffic. Specify this field if the container port is different from <code>image.port</code> for the main container or <code>sidecar.port</code> for the sidecar containers.</p>
<p><span class="parent-field">http.additional_rules.</span><a id="http-additional-rules-stickiness" href="#http-additional-rules-stickiness" class="field"><code>stickiness</code></a> <span class="type">Boolean</span><br />
    Indicates whether sticky sessions are enabled.</p>
<p><span class="parent-field">http.additional_rules.</span><a id="http-additional-rules-allowed-source-ips" href="#http-additional-rules-allowed-source-ips" class="field"><code>allowed_source_ips</code></a> <span class="type">Array of Strings</span><br />
    CIDR IP addresses permitted to access your service.
    <div class="highlight"><pre><span></span><code><span class="nt">http</span><span class="p">:</span>
  <span class="nt">additional_rules</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">allowed_source_ips</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="s">&quot;192.0.2.0/24&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;198.51.100.10/32&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div></p>
<p><span class="parent-field">http.additional_rules.</span><a id="http-additional-rules-alias" href="#http-additional-rules-alias" class="field"><code>alias</code></a> <span class="type">String or Array of Strings or Array of Maps</span><br />
    HTTPS domain alias of your service.
    <div class="highlight"><pre><span></span><code><span class="c1"># String version.</span>
<span class="nt">http</span><span class="p">:</span>
  <span class="nt">additional_rules</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">alias</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">example.com</span>
<span class="c1"># Alternatively, as an array of strings.</span>
<span class="nt">http</span><span class="p">:</span>
  <span class="nt">additional_rules</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">alias</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="s">&quot;example.com&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;v1.example.com&quot;</span><span class="p p-Indicator">]</span>
<span class="c1"># Alternatively, as an array of maps.</span>
<span class="nt">http</span><span class="p">:</span>
  <span class="nt">additional_rules</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">alias</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">example.com</span>
          <span class="nt">hosted_zone</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Z0873220N255IR3MTNR4</span>
        <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1.example.com</span>
          <span class="nt">hosted_zone</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AN0THE9H05TED20NEID</span>
</code></pre></div>
<span class="parent-field">http.additional_rules.</span><a id="http-additional-rules-hosted-zone" href="#http-additional-rules-hosted-zone" class="field"><code>hosted_zone</code></a> <span class="type">String</span><br />
    ID of your existing hosted zone; can only be used with <code>http.alias</code> and <code>http.additional_rules.alias</code>. If you have an environment with imported certificates, you can specify the hosted zone into which Copilot should insert the A record once the load balancer is created.
    <div class="highlight"><pre><span></span><code><span class="nt">http</span><span class="p">:</span>
  <span class="nt">additional_rules</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">alias</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">example.com</span>
      <span class="nt">hosted_zone</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Z0873220N255IR3MTNR4</span>
<span class="c1"># Also see http.alias array of maps example, above.</span>
</code></pre></div>
<span class="parent-field">http.additional_rules.</span><a id="http-additional-rules-redirect-to-https" href="#http-additional-rules-redirect-to-https" class="field"><code>redirect_to_https</code></a> <span class="type">Boolean</span><br />
    Automatically redirect the Application Load Balancer from HTTP to HTTPS. By default it is <code>true</code>.</p>
<p><span class="parent-field">http.additional_rules.</span><a id="http-additional-rules-version" href="#http-additional-rules-version" class="field"><code>version</code></a> <span class="type">String</span><br />
    The HTTP(S) protocol version. Must be one of <code>'grpc'</code>, <code>'http1'</code>, or <code>'http2'</code>. If omitted, then <code>'http1'</code> is assumed.
    If using gRPC, please note that a domain must be associated with your application.</p>
<div class="separator"></div>

<p><a id="nlb" href="#nlb" class="field"><code>nlb</code></a> <span class="type">Map</span><br />
nlb セクションは Service を Network Load Balancer と統合するためのパラメーターを含みます。</p>
<p>Network Load Balancerは、<code>nlb</code> フィールドを指定した場合のみ有効になります。
Load Balanced Web Service では、Application Load Balancer と Network Load Balancer のいずれかが有効になっている必要があることに注意してください。</p>
<p><span class="parent-field">nlb.</span><a id="nlb-port" href="#nlb-port" class="field"><code>port</code></a> <span class="type">String</span><br />
必須項目。Network Load Balancer がリッスンするポートとプロトコルを指定します。</p>
<p>使用可能なプロトコルは <code>tcp</code> 、 <code>udp</code> と <code>tls</code> です。プロトコルを指定しない場合、デフォルトで <code>tcp</code> が使用されます。<br />
設定例:
<div class="highlight"><pre><span></span><code><span class="nt">nlb</span><span class="p">:</span>
  <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">80</span>
</code></pre></div>
<code>tcp</code> リクエストをポート 80 で待ち受けるようにするためには、以下のように設定します。<br />
設定例:
<div class="highlight"><pre><span></span><code><span class="nt">nlb</span><span class="p">:</span>
  <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">80/tcp</span>
</code></pre></div></p>
<p>簡単に TLS 終端を有効にすることができます。<br />
設定例:
<div class="highlight"><pre><span></span><code><span class="nt">nlb</span><span class="p">:</span>
  <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">443/tls</span>
</code></pre></div></p>
<p><span class="parent-field">nlb.</span><a id="nlb-healthcheck" href="#nlb-healthcheck" class="field"><code>healthcheck</code></a> <span class="type">Map</span><br />
Network Load Balancer のヘルスチェックの設定を指定します。
<div class="highlight"><pre><span></span><code><span class="nt">nlb</span><span class="p">:</span>
  <span class="nt">healthcheck</span><span class="p">:</span>
    <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">80</span>
    <span class="nt">healthy_threshold</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">3</span>
    <span class="nt">unhealthy_threshold</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
    <span class="nt">interval</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">15s</span>
    <span class="nt">timeout</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10s</span>
</code></pre></div></p>
<p><span class="parent-field">nlb.healthcheck.</span><a id="nlb-healthcheck-port" href="#nlb-healthcheck-port" class="field"><code>port</code></a> <span class="type">String</span><br />
ヘルスチェックのリクエストが送信されるポート。ヘルスチェックが、コンテナターゲットポートとは異なるポートで実行される必要がある場合に指定します。</p>
<p><span class="parent-field">nlb.healthcheck.</span><a id="nlb-healthcheck-healthy-threshold" href="#nlb-healthcheck-healthy-threshold" class="field"><code>healthy_threshold</code></a> <span class="type">Integer</span><br />
unhealthy なターゲットを healthy とみなすために必要な、連続したヘルスチェックの成功回数を指定します。デフォルト値は 3 で、設定可能な範囲は、2 〜 10 です。</p>
<p><span class="parent-field">nlb.healthcheck.</span><a id="nlb-healthcheck-unhealthy-threshold" href="#nlb-healthcheck-unhealthy-threshold" class="field"><code>unhealthy_threshold</code></a> <span class="type">Integer</span><br />
ターゲットが unhealthy であると判断するまでに必要な、連続したヘルスチェックの失敗回数を指定します。デフォルト値は 3 で、設定可能な範囲は、2 〜 10 です。</p>
<p><span class="parent-field">nlb.healthcheck.</span><a id="nlb-healthcheck-grace-period" href="#nlb-healthcheck-grace-period" class="field"><code>grace_period</code></a> <span class="type">Duration</span><br />
コンテナ起動時にターゲットグループのヘルスチェックが失敗した場合の、それを無視する時間を指定します。デフォルトは 60 秒です。これは、healthy であることを担保しながら着信を待機するまでに時間がかかるコンテナのデプロイ時の問題を修正したり、迅速な起動が保証されているコンテナのデプロイを高速化したりするのに役立ちます。</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>この説明を書いている時点では、<a href="https://docs.aws.amazon.com/ja_jp/elasticloadbalancing/latest/network/target-group-health-checks.html">ドキュメント</a>によると、Network Load Balancer の 'unhealthy threshold' は 'healthy threshold' と同じである必要があるとされています。</p>
</div>
<p><span class="parent-field">nlb.healthcheck.</span><a id="nlb-healthcheck-interval" href="#nlb-healthcheck-interval" class="field"><code>interval</code></a> <span class="type">Duration</span><br />
個々のターゲットへのヘルスチェックを行う際の、おおよその間隔を秒単位で指定します。設定可能な値は 10s (10 秒) または 30s (30 秒) で、デフォルト値は 30s です。</p>
<p><span class="parent-field">nlb.healthcheck.</span><a id="nlb-healthcheck-timeout" href="#nlb-healthcheck-timeout" class="field"><code>timeout</code></a> <span class="type">Duration</span><br />
ターゲットからの応答がない場合、ヘルスチェックが失敗したとみなすまでの時間を秒単位で指定します。デフォルト値は 10s (10 秒)です。</p>
<p><span class="parent-field">nlb.</span><a id="nlb-target-container" href="#nlb-target-container" class="field"><code>target_container</code></a> <span class="type">String</span><br />
サイドカーコンテナを指定することで、Service のメインコンテナの代わりにサイドカーでロードバランサからのリクエストを受け取れます。</p>
<p><span class="parent-field">nlb.</span><a id="nlb-target-port" href="#nlb-target-port" class="field"><code>target_port</code></a> <span class="type">Integer</span><br />
トラフィックを受信するコンテナのポート。コンテナポートがリスナーポートの <code>nlb.port</code> と異なる場合、このフィールドを指定します。</p>
<p><span class="parent-field">nlb.</span><a id="nlb-ssl-policy" href="#nlb-ssl-policy" class="field"><code>ssl_policy</code></a> <span class="type">String</span><br />
どのようなプロトコルや暗号をサポートするかを定義するセキュリティポリシーです。詳しくは<a href="https://docs.aws.amazon.com/ja_jp/elasticloadbalancing/latest/network/create-tls-listener.html#describe-ssl-policies">このドキュメント</a>をご覧ください。</p>
<p><span class="parent-field">nlb.</span><a id="nlb-stickiness" href="#nlb-stickiness" class="field"><code>stickiness</code></a> <span class="type">Boolean</span><br />
スティッキーセッションの有効化、あるいは無効化を指定します。</p>
<p><span class="parent-field">nlb.</span><a id="nlb-alias" href="#nlb-alias" class="field"><code>alias</code></a> <span class="type">String or Array of Strings</span><br />
Service のドメインエイリアス
<div class="highlight"><pre><span></span><code><span class="c1"># 文字列で指定する場合</span>
<span class="nt">nlb</span><span class="p">:</span>
  <span class="nt">alias</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">example.com</span>
<span class="c1"># 別の方法として、文字列配列の場合</span>
<span class="nt">nlb</span><span class="p">:</span>
  <span class="nt">alias</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="s">&quot;example.com&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;v1.example.com&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div>
<span class="parent-field">nlb.</span><a id="nlb-additional-listeners" href="#nlb-additional-listeners" class="field"><code>additional_listeners</code></a> <span class="type">Array of Maps</span><br />
複数の NLB リスナーを設定します。</p>
<details class="note"><summary>nlb.additional_listeners Map</summary><p><span class="parent-field">nlb.additional_listeners.</span><a id="nlb-additional-listeners-port" href="#nlb-additional-listeners-port" class="field"><code>port</code></a> <span class="type">String</span><br />
必須項目。Network Load Balancer が待ち受ける為の追加ポートとプロトコル。</p>
<p>使用可能なプロトコルには <code>tcp</code> 、<code>udp</code> と <code>tls</code> です。プロトコルが指定されていない場合、デフォルト値として <code>tcp</code> が使用されます。</p>
<p><span class="parent-field">nlb.additional_listeners.</span><a id="nlb-additional-listeners-healthcheck" href="#nlb-additional-listeners-healthcheck" class="field"><code>healthcheck</code></a> <span class="type">Map</span>
Network Load Balancer の追加リスナーに対するヘルスチェック設定を指定します。
<div class="highlight"><pre><span></span><code><span class="nt">nlb</span><span class="p">:</span>
  <span class="nt">additional_listeners</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">healthcheck</span><span class="p">:</span>
        <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">80</span>
        <span class="nt">healthy_threshold</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">3</span>
        <span class="nt">unhealthy_threshold</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
        <span class="nt">interval</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">15s</span>
        <span class="nt">timeout</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10s</span>
</code></pre></div></p>
<p><span class="parent-field">nlb.additional_listeners.healthcheck.</span><a id="nlb-additional-listeners-healthcheck-port" href="#nlb-additional-listeners-healthcheck-port" class="field"><code>port</code></a> <span class="type">String</span><br />
ヘルスチェックリクエストが送信されるポート。コンテナターゲットポートと異なるポートでヘルスチェックが実行される場合に指定します。</p>
<p><span class="parent-field">nlb.additional_listeners.healthcheck.</span><a id="nlb-additional-listeners-healthcheck-healthy-threshold" href="#nlb-additional-listeners-healthcheck-healthy-threshold" class="field"><code>healthy_threshold</code></a> <span class="type">Integer</span><br />
unhealthy なターゲットを healthy とみなすために必要な、連続したヘルスチェックの成功回数を指定します。デフォルト値は 3 で、設定可能な範囲は、2-10 です。</p>
<p><span class="parent-field">nlb.additional_listeners.healthcheck.</span><a id="nlb-additional-listeners-healthcheck-unhealthy-threshold" href="#nlb-additional-listeners-healthcheck-unhealthy-threshold" class="field"><code>unhealthy_threshold</code></a> <span class="type">Integer</span><br />
ターゲットが unhealthy であると判断するまでに必要な、連続したヘルスチェックの失敗回数を指定します。デフォルト値は 3 で、設定可能な範囲は、2-10 です。</p>
<p><span class="parent-field">nlb.additional_listeners.healthcheck.</span><a id="nlb-additional-listeners-healthcheck-interval" href="#nlb-additional-listeners-healthcheck-interval" class="field"><code>interval</code></a> <span class="type">Duration</span><br />
個々のターゲットへのヘルスチェックを行う際の、おおよその間隔を秒単位で指定します。 10 秒または 30 秒が設定可能です。デフォルト値は 30 秒です。</p>
<p><span class="parent-field">nlb.additional_listeners.healthcheck.</span><a id="nlb-additional-listeners-healthcheck-timeout" href="#nlb-additional-listeners-healthcheck-timeout" class="field"><code>timeout</code></a> <span class="type">Duration</span><br />
ターゲットからの応答がない場合、ヘルスチェックが失敗したとみなすまでの時間を秒単位で指定します。デフォルト値は 10 秒です。</p>
<p><span class="parent-field">nlb.additional_listeners.</span><a id="nlb-additional-listeners-target-container" href="#nlb-additional-listeners-target-container" class="field"><code>target_container</code></a> <span class="type">String</span><br />
サービスコンテナの代わりとなるサイドカーコンテナ。</p>
<p><span class="parent-field">nlb.additional_listeners.</span><a id="nlb-additional-listeners-target-port" href="#nlb-additional-listeners-target-port" class="field"><code>target_port</code></a> <span class="type">Integer</span><br />
トラフィックを受信するコンテナポート。コンテナポートが <code>nlb.port</code>、リスナーポートと異なる場合にこのフィールドを指定します。</p>
<p><span class="parent-field">nlb.additional_listeners.</span><a id="nlb-additional-listeners-ssl-policy" href="#nlb-additional-listeners-ssl-policy" class="field"><code>ssl_policy</code></a> <span class="type">String</span> </p>
</details>
<p>サポートするプロコルと暗号を定義するセキュリティポリシーです。詳細については、<a href="https://docs.aws.amazon.com/ja_jp/elasticloadbalancing/latest/network/create-tls-listener.html#describe-ssl-policies">こちらのドキュメント</a>を確認してください。</p>
<pre><code>&lt;span class="parent-field"&gt;nlb.additional_listeners.&lt;/span&gt;&lt;a id="nlb-additional-listeners-stickiness" href="#nlb-additional-listeners-stickiness" class="field"&gt;`stickiness`&lt;/a&gt; &lt;span class="type"&gt;Boolean&lt;/span&gt;  
スティッキーセッションの有効化、あるいは無効化を指定します。
</code></pre>
<div class="separator"></div>

<p><a id="image" href="#image" class="field"><code>image</code></a> <span class="type">Map</span><br />
image セクションは、Docker ビルドに関する設定や、既にあるコンテナイメージに対する参照についてのパラメータを含みます。</p>
<p><span class="parent-field">image.</span><a id="image-build" href="#image-build" class="field"><code>build</code></a> <span class="type">String or Map</span><br />
オプションの引数で指定した Dockerfile からコンテナをビルドします。後述の <a href="#image-location"><code>image.location</code></a> フィールドとは排他的な使用となります。</p>
<p>このフィールドに String（文字列）を指定した場合、Copilot はそれを Dockerfile の場所を示すパスと解釈します。その際、指定したパスのディレクトリ部が Docker のビルドコンテキストであると仮定します。以下は build フィールドに文字列を指定する例です。
<div class="highlight"><pre><span></span><code><span class="nt">image</span><span class="p">:</span>
  <span class="nt">build</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">path/to/dockerfile</span>
</code></pre></div>
これにより、イメージビルドの際に次のようなコマンドが実行されることになります: <code>$ docker build --file path/to/dockerfile path/to</code></p>
<p>build フィールドには Map も利用できます。
<div class="highlight"><pre><span></span><code><span class="nt">image</span><span class="p">:</span>
  <span class="nt">build</span><span class="p">:</span>
    <span class="nt">dockerfile</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">path/to/dockerfile</span>
    <span class="nt">context</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">context/dir</span>
    <span class="nt">target</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">build-stage</span>
    <span class="nt">cache_from</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">image:tag</span>
    <span class="nt">args</span><span class="p">:</span>
      <span class="nt">key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">value</span>
</code></pre></div>
この例は、Copilot は Docker ビルドコンテキストに context フィールドの値が示すディレクトリを利用し、args 以下のキーバリューのペアをイメージビルド時の --build-args 引数として渡します。上記例と同等の docker build コマンドは次のようになります:<br />
<code>$ docker build --file path/to/dockerfile --target build-stage --cache-from image:tag --build-arg key=value context/dir</code>.</p>
<p>Copilot はあなたの意図を理解するために最善を尽くしますので、記述する情報の省略も可能です。例えば、<code>context</code> は指定しているが <code>dockerfile</code> は未指定の場合、Copilot は Dockerfile が "Dockerfile" という名前で存在すると仮定しつつ、docker コマンドを <code>context</code> ディレクトリ以下で実行します。逆に <code>dockerfile</code> は指定しているが <code>context</code> が未指定の場合は、Copilot はあなたが <code>dockerfile</code> で指定されたディレクトリをビルドコンテキストディレクトリとして利用したいのだと仮定します。</p>
<p>すべてのパスはワークスペースのルートディレクトリからの相対パスと解釈されます。</p>
<p><span class="parent-field">image.</span><a id="image-location" href="#image-location" class="field"><code>location</code></a> <span class="type">String</span><br />
Dockerfile からコンテナイメージをビルドする代わりに、既存のコンテナイメージ名の指定も可能です。<code>image.location</code> と <a href="#image-build"><code>image.build</code></a> の同時利用はできません。
<code>location</code> フィールドの制約を含む指定方法は Amazon ECS タスク定義の <a href="https://docs.aws.amazon.com/ja_jp/AmazonECS/latest/developerguide/task_definition_parameters.html#container_definition_image"><code>image</code> パラメータ</a>のそれに従います。</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Windows コンテナイメージを指定する場合、Manifest に <code>platform: windows/amd64</code> を指定する必要があります。<br />
ARM アーキテクチャベースのコンテナイメージを指定する場合、Manifest に <code>platform: linux/arm64</code> を指定する必要があります。</p>
</div>
<p><span class="parent-field">image.</span><a id="image-credential" href="#image-credential" class="field"><code>credentials</code></a> <span class="type">String</span><br />
任意項目です。プライベートリポジトリの認証情報の ARN。<code>credentials</code> フィールドは、Amazon ECS タスク定義の <a href="https://docs.aws.amazon.com/ja_jp/AmazonECS/latest/developerguide/private-auth.html"><code>credentialsParameter</code></a> と同じです。 </p>
<p><span class="parent-field">image.</span><a id="image-labels" href="#image-labels" class="field"><code>labels</code></a> <span class="type">Map</span><br />
コンテナに付与したい <a href="https://docs.docker.com/config/labels-custom-metadata/">Docker ラベル</a>を key/value の Map で指定できます。これは任意設定項目です。</p>
<p><span class="parent-field">image.</span><a id="image-depends-on" href="#image-depends-on" class="field"><code>depends_on</code></a> <span class="type">Map</span><br />
任意項目。コンテナに追加する <a href="https://docs.aws.amazon.com/ja_jp/AmazonECS/latest/APIReference/API_ContainerDependency.html">Container Dependencies</a> の任意の key/value の Map。Map の key はコンテナ名で、value は依存関係を表す値 (依存条件) として <code>start</code>、<code>healthy</code>、<code>complete</code>、<code>success</code> のいずれかを指定できます。なお、必須コンテナに <code>complete</code> や <code>success</code> の依存条件を指定することはできません。</p>
<p>設定例:
<div class="highlight"><pre><span></span><code><span class="nt">image</span><span class="p">:</span>
  <span class="nt">build</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./Dockerfile</span>
  <span class="nt">depends_on</span><span class="p">:</span>
    <span class="nt">nginx</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">start</span>
    <span class="nt">startup</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">success</span>
</code></pre></div>
上記の例では、タスクのメインコンテナは <code>nginx</code> サイドカーが起動し、<code>startup</code> コンテナが正常に完了してから起動します。</p>
<p><span class="parent-field">image.</span><a id="image-port" href="#image-port" class="field"><code>port</code></a> <span class="type">Integer</span><br />
公開するポート番号。Dockerfile 内に <code>EXPOSE</code> インストラクションが記述されている場合、Copilot はそれをパースした値をここに挿入します。
ポートを <code>443</code> に設定し、 ロードバランサーが <code>http</code> で有効化されている場合、プロトコルは <code>HTTPS</code> に設定され、ロードバランサーは Fargate タスクと TLS 接続します。ターゲットコンテナにインストールされた証明書が利用されます。</p>
<p><span class="parent-field">image.</span><a id="image-healthcheck" href="#image-healthcheck" class="field"><code>healthcheck</code></a> <span class="type">Map</span><br />
コンテナヘルスチェックの設定。この設定はオプションです。</p>
<p><span class="parent-field">image.healthcheck.</span><a id="image-healthcheck-cmd" href="#image-healthcheck-cmd" class="field"><code>command</code></a> <span class="type">Array of Strings</span><br />
コンテナが healthy であると判断するためのコマンド。<br />
このフィールドに設定する文字列配列の最初のアイテムには、コマンド引数を直接実行するための <code>CMD</code>、あるいはコンテナのデフォルトシェルでコマンドを実行する <code>CMD-SHELL</code> が利用できます。</p>
<p><span class="parent-field">image.healthcheck.</span><a id="image-healthcheck-interval" href="#image-healthcheck-interval" class="field"><code>interval</code></a> <span class="type">Duration</span><br />
各ヘルスチェックの実行間の秒単位の間隔です。デフォルト値は１０秒です。</p>
<p><span class="parent-field">image.healthcheck.</span><a id="image-healthcheck-retries" href="#image-healthcheck-retries" class="field"><code>retries</code></a> <span class="type">Integer</span><br />
コンテナが unhealthy と見なされるまでに、失敗したヘルスチェックを再試行する回数です。デフォルト値は２です。</p>
<p><span class="parent-field">image.healthcheck.</span><a id="image-healthcheck-timeout" href="#image-healthcheck-timeout" class="field"><code>timeout</code></a> <span class="type">Duration</span><br />
ヘルスチェックの実行開始から失敗とみなすまでに待機する秒単位の期間です。デフォルト値は５秒です。</p>
<p><span class="parent-field">image.healthcheck.</span><a id="image-healthcheck-start-period" href="#image-healthcheck-start-period" class="field"><code>start_period</code></a> <span class="type">Duration</span> 
ヘルスチェックの実行と失敗がリトライ回数としてカウントされ始める前に、コンテナに対して起動処理を済ませる猶予期間の長さです。秒単位で指定し、デフォルトは０秒です。</p>
<div class="separator"></div>

<p><a id="cpu" href="#cpu" class="field"><code>cpu</code></a> <span class="type">Integer</span>
タスクに割り当てる CPU ユニット数。指定可能な値については <a href="https://docs.aws.amazon.com/ja_jp/AmazonECS/latest/developerguide/task-cpu-memory-error.html">Amazon ECS ドキュメント</a>をご覧ください。</p>
<div class="separator"></div>

<p><a id="memory" href="#memory" class="field"><code>memory</code></a> <span class="type">Integer</span><br />
タスクに割り当てるメモリ量（MiB）。指定可能な値については <a href="https://docs.aws.amazon.com/ja_jp/AmazonECS/latest/developerguide/task-cpu-memory-error.html">Amazon ECS ドキュメント</a>をご覧ください。</p>
<div class="separator"></div>

<p><a id="platform" href="#platform" class="field"><code>platform</code></a> <span class="type">String or Map</span><br />
<code>docker build --platform</code> で渡すオペレーティングシステムとアーキテクチャ。（<code>[os]/[arch]</code> の形式で指定）<br />
例えば <code>linux/arm64</code> や <code>windows/x86_64</code> などが指定できます。デフォルトは <code>linux/x86_64</code> です。</p>
<p>異なる <code>osfamily</code> や <code>architecture</code> を明示的に指定することもできます。
例えば、Windows では以下の設定はデフォルトで <code>WINDOWS_SERVER_2019_CORE</code> が利用されますが</p>
<div class="highlight"><pre><span></span><code><span class="nt">platform</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">windows/x86_64</span>
</code></pre></div>
<p>Map を使って <code>WINDOWS_SERVER_2019_FULL</code> を明示的に指定できます。</p>
<p><div class="highlight"><pre><span></span><code><span class="nt">platform</span><span class="p">:</span>
  <span class="nt">osfamily</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">windows_server_2019_full</span>
  <span class="nt">architecture</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">x86_64</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nt">platform</span><span class="p">:</span>
  <span class="nt">osfamily</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">windows_server_2019_core</span>
  <span class="nt">architecture</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">x86_64</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nt">platform</span><span class="p">:</span>
  <span class="nt">osfamily</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">windows_server_2022_core</span>
  <span class="nt">architecture</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">x86_64</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nt">platform</span><span class="p">:</span>
  <span class="nt">osfamily</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">windows_server_2022_full</span>
  <span class="nt">architecture</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">x86_64</span>
</code></pre></div></p>
<div class="separator"></div>

<p><a id="count" href="#count" class="field"><code>count</code></a> <span class="type">Integer or Map</span>
Service が保つべきタスクの数。</p>
<p>次の様に指定すると、
<div class="highlight"><pre><span></span><code><span class="nt">count</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">5</span>
</code></pre></div>
Service は、希望するタスク数を 5 に設定し、Service 内に 5 つのタスクが起動している様に保ちます。</p>
<p><span class="parent-field">count.</span><a id="count-spot" href="#count-spot" class="field"><code>spot</code></a> <span class="type">Integer</span></p>
<p><code>spot</code> サブフィールドに数値を指定することで、Service の実行に Fargate Spot キャパシティを利用できます。
<div class="highlight"><pre><span></span><code><span class="nt">count</span><span class="p">:</span>
  <span class="nt">spot</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">5</span>
</code></pre></div></p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>ARM アーキテクチャで動作するコンテナでは、Fargate Spot はサポートされていません。</p>
</div>
<div class="separator"></div>

<p>あるいは、Map を指定してオートスケーリングの設定も可能です。
<div class="highlight"><pre><span></span><code><span class="nt">count</span><span class="p">:</span>
  <span class="nt">range</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1-10</span>
  <span class="nt">cooldown</span><span class="p">:</span>
    <span class="nt">in</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">30s</span>
    <span class="nt">out</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">60s</span>
  <span class="nt">cpu_percentage</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">70</span>
  <span class="nt">memory_percentage</span><span class="p">:</span>
    <span class="nt">value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">80</span>
    <span class="nt">cooldown</span><span class="p">:</span>
      <span class="nt">in</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">80s</span>
      <span class="nt">out</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">160s</span>
  <span class="nt">requests</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10000</span>
  <span class="nt">response_time</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2s</span>
</code></pre></div></p>
<p><span class="parent-field">count.</span><a id="count-range" href="#count-range" class="field"><code>range</code></a> <span class="type">String or Map</span>
メトリクスに指定した値に基づいて、Service が保つべきタスク数の最小と最大を範囲指定できます。
<div class="highlight"><pre><span></span><code><span class="nt">count</span><span class="p">:</span>
  <span class="nt">range</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">n-m</span>
</code></pre></div>
これにより Application Auto Scaling がセットアップされ、<code>MinCapacity</code> に <code>n</code> が、<code>MaxCapacity</code> に <code>m</code> が設定されます。</p>
<p>あるいは次の例に挙げるように <code>range</code> フィールド以下に <code>min</code> と <code>max</code> を指定し、加えて <code>spot_from</code> フィールドを利用することで、一定数以上のタスクを実行する場合に Fargate Spot キャパシティを利用する設定が可能です。</p>
<div class="highlight"><pre><span></span><code><span class="nt">count</span><span class="p">:</span>
  <span class="nt">range</span><span class="p">:</span>
    <span class="nt">min</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
    <span class="nt">max</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10</span>
    <span class="nt">spot_from</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">3</span>
</code></pre></div>
<p>上記の例では Application Auto Scaling は 1-10 の範囲で設定されますが、最初の２タスクはオンデマンド Fargate キャパシティに配置されます。Service が３つ以上のタスクを実行するようにスケールした場合、３つ目以降のタスクは最大タスク数に達するまで Fargate Spot に配置されます。</p>
<p><span class="parent-field">count.range.</span><a id="count-range-min" href="#count-range-min" class="field"><code>min</code></a> <span class="type">Integer</span>
Service がオートスケーリングを利用する場合の最小タスク数。</p>
<p><span class="parent-field">count.range.</span><a id="count-range-max" href="#count-range-max" class="field"><code>max</code></a> <span class="type">Integer</span>
Service がオートスケーリングを利用する場合の最大タスク数。</p>
<p><span class="parent-field">count.range.</span><a id="count-range-spot-from" href="#count-range-spot-from" class="field"><code>spot_from</code></a> <span class="type">Integer</span>
Service の何個目のタスクから Fargate Spot キャパシティプロバイダーを利用するか。</p>
<p><span class="parent-field">count.</span><a id="count-cooldown" href="#count-cooldown" class="field"><code>cooldown</code></a> <span class="type">Map</span>
指定されたすべてのオートスケーリングフィールドのデフォルトクールダウンとして使用されるクールダウンスケーリングフィールド。</p>
<p><span class="parent-field">count.cooldown.</span><a id="count-cooldown-in" href="#count-cooldown-in" class="field"><code>in</code></a> <span class="type">Duration</span>
Service をスケールアップするためのオートスケーリングのクールダウン時間。</p>
<p><span class="parent-field">count.cooldown.</span><a id="count-cooldown-out" href="#count-cooldown-out" class="field"><code>out</code></a> <span class="type">Duration</span>
Service をスケールダウンさせるためのオートスケーリングクールダウン時間。</p>
<p><code>cpu_percentage</code>、<code>memory_percentage</code>、<code>requests</code> および <code>response_time</code> のオプションは、オートスケーリングに関する <code>count</code> フィールドにて、フィールド値としてあるいはフィールド値とクールダウン設定に関する詳細情報を含むマップとして定義することができます。
<div class="highlight"><pre><span></span><code><span class="nt">value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">50</span>
<span class="nt">cooldown</span><span class="p">:</span>
  <span class="nt">in</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">30s</span>
  <span class="nt">out</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">60s</span>
</code></pre></div>
ここで指定したクールダウン設定は、デフォルトのクールダウン設定より優先されます。</p>
<p><span class="parent-field">count.</span><a id="count-cpu-percentage" href="#count-cpu-percentage" class="field"><code>cpu_percentage</code></a> <span class="type">Integer or Map</span>
Service が保つべき平均 CPU 使用率を指定し、それによってスケールアップ・ダウンします。</p>
<p><span class="parent-field">count.</span><a id="count-memory-percentage" href="#count-memory-percentage" class="field"><code>memory_percentage</code></a> <span class="type">Integer</span>
Service が保つべき平均メモリ使用率を指定し、それによってスケールアップ・ダウンします。</p>
<p><span class="parent-field">count.</span><a id="requests" href="#count-requests" class="field"><code>requests</code></a> <span class="type">Integer</span>
タスク当たりのリクエスト数を指定し、それによってスケールアップ・ダウンします。</p>
<p><span class="parent-field">count.</span><a id="response-time" href="#count-response-time" class="field"><code>response_time</code></a> <span class="type">Duration</span>
Service の平均レスポンスタイムを指定し、それによってスケールアップ・ダウンします。</p>
<div class="separator"></div>

<p><a id="exec" href="#exec" class="field"><code>exec</code></a> <span class="type">Boolean</span><br />
コンテナ内部でのインタラクティブなコマンド実行機能を有効化します。デフォルト値は <code>false</code> です。<code>$ copilot svc exec</code> コマンドの利用には、この値に <code>true</code> を指定しておく必要があります。</p>
<div class="separator"></div>

<p><a id="deployment" href="#deployment" class="field"><code>deployment</code></a> <span class="type">Map</span><br />
deployment セクションには、デプロイ中に実行されるタスクの数や、タスクの停止と開始の順序を制御するためのパラメータが含まれています。</p>
<p><span class="parent-field">deployment.</span><a id="deployment-rolling" href="#deployment-rolling" class="field"><code>rolling</code></a> <span class="type">String</span><br />
ローリングデプロイ戦略。有効な値は以下の通りです。</p>
<ul>
<li><code>"default"</code>: 古いタスクを停止する前に、更新されたタスク定義で必要な数だけ新しいタスクを作成します。内部的には、<a href="https://docs.aws.amazon.com/ja_jp/AmazonECS/latest/developerguide/service_definition_parameters.html#minimumHealthyPercent"><code>minimumHealthyPercent</code></a> を 100 に、<a href="https://docs.aws.amazon.com/ja_jp/AmazonECS/latest/developerguide/service_definition_parameters.html#maximumPercent"><code>maximumPercent</code></a> を 200 に設定することになります。</li>
<li><code>"recreate"</code>: 実行中のタスクをすべて停止し、新しいタスクを起動します。内部的には、<a href="https://docs.aws.amazon.com/ja_jp/AmazonECS/latest/developerguide/service_definition_parameters.html#minimumHealthyPercent"><code>minimumHealthyPercent</code></a> を 0 に、<a href="https://docs.aws.amazon.com/ja_jp/AmazonECS/latest/developerguide/service_definition_parameters.html#maximumPercent"><code>maximumPercent</code></a> を 100 に設定します。</li>
</ul>
<p><span class="parent-field">deployment.</span><a id="deployment-rollback-alarms" href="#deployment-rollback-alarms" class="field"><code>rollback_alarms</code></a> <span class="type">文字列またはマップの配列</span></p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>デプロイの開始時にアラームが「In alarm」状態にある場合、Amazon ECS はそのデプロイの間、アラームを監視しません。詳細については、<a href="https://docs.aws.amazon.com/ja_jp/AmazonECS/latest/userguide/deployment-alarm-failure.html">こちらのドキュメント</a>をお読みください。</p>
</div>
<p>文字列のリストとして、<a href="https://docs.aws.amazon.com/ja_jp/AmazonECS/latest/userguide/deployment-alarm-failure.html">デプロイのロールバック</a>を引き起こす可能性のある、Service に関連付ける既存の CloudWatch アラームの名前を指定します。</p>
<p><div class="highlight"><pre><span></span><code><span class="nt">deployment</span><span class="p">:</span>
  <span class="nt">rollback_alarms</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="s">&quot;MyAlarm-ELB-4xx&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;MyAlarm-ELB-5xx&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div>
マップとして、Copilot が作成したアラームのアラーム メトリックとしきい値
利用可能なメトリクス:</p>
<div class="highlight"><pre><span></span><code><span class="nt">deployment</span><span class="p">:</span>
  <span class="nt">rollback_alarms</span><span class="p">:</span>
    <span class="nt">cpu_utilization</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">70    // Percentage value at or above which alarm is triggered.</span>
    <span class="nt">memory_utilization</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">50 // Percentage value at or above which alarm is triggered.</span>
</code></pre></div>
<div class="separator"></div>

<p><a id="entrypoint" href="#entrypoint" class="field"><code>entrypoint</code></a> <span class="type">String or Array of Strings</span><br />
コンテナイメージのデフォルトエントリポイントをオーバーライドします。
<div class="highlight"><pre><span></span><code><span class="c1"># 文字列による指定。</span>
<span class="nt">entrypoint</span><span class="p">:</span> <span class="s">&quot;/bin/entrypoint</span><span class="nv"> </span><span class="s">--p1</span><span class="nv"> </span><span class="s">--p2&quot;</span>
<span class="c1"># あるいは文字列配列による指定も可能。</span>
<span class="nt">entrypoint</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="s">&quot;/bin/entrypoint&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;--p1&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;--p2&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div></p>
<div class="separator"></div>

<p><a id="command" href="#command" class="field"><code>command</code></a> <span class="type">String or Array of Strings</span><br />
コンテナイメージのデフォルトコマンドをオーバーライドします。</p>
<div class="highlight"><pre><span></span><code><span class="c1"># 文字列による指定。</span>
<span class="nt">command</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ps au</span>
<span class="c1"># あるいは文字列配列による指定も可能。</span>
<span class="nt">command</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="s">&quot;ps&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;au&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div>
<div class="separator"></div>

<p><a id="network" href="#network" class="field"><code>network</code></a> <span class="type">Map</span>    <br />
<code>network</code> セクションは VPC 内の AWS リソースに接続するための設定です。</p>
<p><span class="parent-field">network.</span><a id="network-connect" href="#network-connect" class="field"><code>connect</code></a> <span class="type">Bool or Map</span>  <br />
Service に対し <a href="../../developing/svc-to-svc-communication/#service-connect">Service Connect</a> を有効にします。Service 間のトラフィックを負荷分散し、より弾力的にします。デフォルトは <code>false</code> です。</p>
<p>Map として利用すると、Service で利用するエイリアスを指定出来ます。エイリアスは Environment 内でユニークである必要があります。</p>
<p><span class="parent-field">network.connect.</span><a id="network-connect-alias" href="#network-connect-alias" class="field"><code>alias</code></a> <span class="type">String</span><br />
Service Connect 経由で公開する Service のカスタム DNS　名です。デフォルトは Service 名です。</p>
<p><span class="parent-field">network.</span><a id="network-vpc" href="#network-vpc" class="field"><code>vpc</code></a> <span class="type">Map</span>  <br />
タスクを配置するサブネットとアタッチされるセキュリティグループの設定です。</p>
<p><span class="parent-field">network.vpc.</span><a id="network-vpc-placement" href="#network-vpc-placement" class="field"><code>placement</code></a> <span class="type">String or Map</span><br />
String として利用する場合、<code>public</code> あるいは <code>private</code> のどちらかを指定します。デフォルトではタスクはパブリックサブネットに配置されます。</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Copilot が生成した VPC を利用して <code>private</code> サブネットにタスクを配置する場合、Copilot は Environment にインターネット接続用の NAT ゲートウェイを作成します。(価格は<a href="https://aws.amazon.com/vpc/pricing/">こちら</a>。)あるいは <code>copilot env init</code> コマンドで既存の VPC をインポートして利用することや、分離されたワークロード用に VPC エンドポイントが構成された VPC を構成ができます。詳細は、<a href="../../developing/custom-environment-resources/">custom environment resources</a>を確認してください。</p>
</div>
<p>Map として利用する場合、 Copilot が ECS タスクを起動するサブネットを指定します。例：</p>
<div class="highlight"><pre><span></span><code><span class="nt">network</span><span class="p">:</span>
  <span class="nt">vpc</span><span class="p">:</span>
    <span class="nt">placement</span><span class="p">:</span>
      <span class="nt">subnets</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="s">&quot;SubnetID1&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;SubnetID2&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div>
<p><span class="parent-field">network.vpc.placement.</span><a id="network-vpc-placement-subnets" href="#network-vpc-placement-subnets" class="field"><code>subnets</code></a> <span class="type">Array of Strings or Map</span><br />
String のリストとする場合、Copilot が ECS タスクを起動するサブネット ID を指定します。</p>
<p>Map の場合、サブネットをフィルタリングするための名前と値のペアを指定します。フィルタは <code>AND</code> で結合され、各フィルタの値は <code>OR</code> で結合されることに注意してください。例えば、タグセット <code>org: bi</code> と <code>type: public</code> を持つサブネットと、タグセット <code>org: bi</code> と <code>type: private</code> を持つサブネットの両方は、以下の方法でマッチングされることになります。</p>
<div class="highlight"><pre><span></span><code><span class="nt">network</span><span class="p">:</span>
  <span class="nt">vpc</span><span class="p">:</span>
    <span class="nt">placement</span><span class="p">:</span>
      <span class="nt">subnets</span><span class="p">:</span>
        <span class="nt">from_tags</span><span class="p">:</span>
          <span class="nt">org</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">bi</span>
          <span class="nt">type</span><span class="p">:</span>
            <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">public</span>
            <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">private</span>
</code></pre></div>
<p><span class="parent-field">network.vpc.placement.subnets</span><a id="network-vpc-placement-subnets-from-tags" href="#network-vpc-placement-subnets-from-tags" class="field"><code>from_tags</code></a> <span class="type">Map of String and String or Array of Strings</span><br />
Copilot が ECS タスクを起動するサブネットをフィルタリングするためのタグセット。</p>
<p><span class="parent-field">network.vpc.</span><a id="network-vpc-security-groups" href="#network-vpc-security-groups" class="field"><code>security_groups</code></a> <span class="type">Array of Strings or Map</span><br />
タスクに関連する追加のセキュリティグループ ID。
<div class="highlight"><pre><span></span><code><span class="nt">network</span><span class="p">:</span>
  <span class="nt">vpc</span><span class="p">:</span>
    <span class="nt">security_groups</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">sg-0001</span><span class="p p-Indicator">,</span> <span class="nv">sg-0002</span><span class="p p-Indicator">]</span>
</code></pre></div>
Copilot にはセキュリティグループが含まれており、Environment 内のコンテナ同士が通信できるようになっています。デフォルトのセキュリティグループを無効にするには、<code>Map</code> 形式で以下のように指定します。
<div class="highlight"><pre><span></span><code><span class="nt">network</span><span class="p">:</span>
  <span class="nt">vpc</span><span class="p">:</span>
    <span class="nt">security_groups</span><span class="p">:</span>
      <span class="nt">deny_default</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">groups</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">sg-0001</span><span class="p p-Indicator">,</span> <span class="nv">sg-0002</span><span class="p p-Indicator">]</span>
</code></pre></div></p>
<p><span class="parent-field">network.vpc.security_groups.</span><a id="network-vpc-security-groups-from-cfn" href="#network-vpc-security-groups-from-cfn" class="field"><code>from_cfn</code></a> <span class="type">String</span><br />
<a href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/using-cfn-stack-exports.html">CloudFormation スタックエクスポート</a>の名称。</p>
<p><span class="parent-field">network.vpc.security_groups.</span><a id="network-vpc-security-groups-deny-default" href="#network-vpc-security-groups-deny-default" class="field"><code>deny_default</code></a> <span class="type">Boolean</span><br />
Environment 内のすべての Service からの侵入を許可するデフォルトのセキュリティグループを無効化します。</p>
<p><span class="parent-field">network.vpc.security_groups.</span><a id="network-vpc-security-groups-groups" href="#network-vpc-security-groups-groups" class="field"><code>groups</code></a> <span class="type">Array of Strings</span>  <br />
タスクに関連する追加のセキュリティグループ ID。</p>
<p><span class="parent-field">network.vpc.security_groups.groups</span><a id="network-vpc-security-groups-groups-from-cfn" href="#network-vpc-security-groups-groups-from-cfn" class="field"><code>from_cfn</code></a> <span class="type">String</span><br />
<a href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/using-cfn-stack-exports.html">CloudFormation スタックエクスポート</a>の名称。</p>
<div class="separator"></div>

<p><a id="variables" href="#variables" class="field"><code>variables</code></a> <span class="type">Map</span><br />
Copilot は Service 名などを常に環境変数としてタスクに対して渡します。本フィールドではそれら以外に追加で渡したい環境変数をキーバーリューのペアで指定します。</p>
<p><span class="parent-field">variables.</span><a id="variables-from-cfn" href="#variables-from-cfn" class="field"><code>from_cfn</code></a> <span class="type">String</span><br />
<a href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/using-cfn-stack-exports.html">CloudFormation スタックエクスポート</a>の名称。</p>
<div class="separator"></div>

<p><a id="env_file" href="#env_file" class="field"><code>env_file</code></a> <span class="type">String</span><br />
ワークスペースのルートから、メインコンテナに引き渡す環境変数を含むファイルへのパスを指定します。環境変数ファイルの詳細については、<a href="https://docs.aws.amazon.com/ja_jp/AmazonECS/latest/developerguide/taskdef-envfiles.html#taskdef-envfiles-considerations">環境変数ファイルの指定に関する考慮事項</a>を参照してください。</p>
<div class="separator"></div>

<p><a id="secrets" href="#secrets" class="field"><code>secrets</code></a> <span class="type">Map</span><br />
<a href="https://docs.aws.amazon.com/ja_jp/systems-manager/latest/userguide/systems-manager-parameter-store.html">AWS Systems Manager (SSM) パラメータストア</a>または <a href="https://docs.aws.amazon.com/ja_jp/secretsmanager/latest/userguide/intro.html">AWS Secrets Manager</a>から環境変数として、Service に安全に渡される秘密値を表すキー・値ペアを指定します。</p>
<p><span class="parent-field">secrets.</span><a id="secrets-from-cfn" href="#secrets-from-cfn" class="field"><code>from_cfn</code></a> <span class="type">String</span><br />
<a href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/using-cfn-stack-exports.html">CloudFormation スタックエクスポート</a>の名称。</p>
<div class="separator"></div>

<p><a id="storage" href="#storage" class="field"><code>storage</code></a> <span class="type">Map</span><br />
<code>storage</code> セクションでは、コンテナやサイドカーでマウントしたい EFS ボリュームを指定できます。これにより、リージョン内のアベイラビリティゾーンにまたがって永続化ストレージへのアクセスが必要となるデータ処理や CMS のようなワークロードの実行が可能となります。詳細は<a href="../../developing/storage/">ストレージ</a>ページもご覧ください。また、タスクレベルのエフェメラルストレージの拡張を設定もできます。</p>
<p><span class="parent-field">storage.</span><a id="ephemeral" href="#ephemeral" class="field"><code>ephemeral</code></a> <span class="type">Int</span>
タスクに割り当てたいエフェメラルストレージのサイズを GiB で指定します。デフォルトかつ最小値は 20 GiB で、最大値は 200 GiB です。20 GiB を超えるサイズを指定した場合、サイズに応じた追加の料金が発生します。</p>
<p>タスクのメインコンテナとサイドカーでファイルシステムを共有したい場合、例えば次のように空ボリュームを使う方法が検討できます。
<div class="highlight"><pre><span></span><code><span class="nt">storage</span><span class="p">:</span>
  <span class="nt">ephemeral</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">100</span>
  <span class="nt">volumes</span><span class="p">:</span>
    <span class="nt">scratch</span><span class="p">:</span>
      <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/var/data</span>
      <span class="nt">read_only</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>

<span class="nt">sidecars</span><span class="p">:</span>
  <span class="nt">mySidecar</span><span class="p">:</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">public.ecr.aws/my-image:latest</span>
    <span class="nt">mount_points</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">source_volume</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">scratch</span>
        <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/var/data</span>
        <span class="nt">read_only</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
</code></pre></div>
この例ではサイドカーとメインコンテナで共有されるボリュームとして、100 GiB のストレージがプロビジョンされます。例えば大きなサイズのデータセットを利用したい場合、あるいはディスク I/O の要求が高いワークロードにおいてサイドカーを利用して EFS からデータをコピーするような場合に有効な方法と言えます。</p>
<p><span class="parent-field">storage.</span><a id="storage-readonlyfs" href="#storage-readonlyfs" class="field"><code>readonly_fs</code></a> <span class="type">Boolean</span>
コンテナのルートファイルシステムに読み取り専用でアクセス出来る様にするには、true を指定します。</p>
<p><span class="parent-field">storage.</span><a id="volumes" href="#volumes" class="field"><code>volumes</code></a> <span class="type">Map</span><br />
マウントしたい EFS ボリュームの名前や設定を指定します。<code>volumes</code> フィールドでは次のように Map を利用して指定します。
<div class="highlight"><pre><span></span><code><span class="nt">volumes</span><span class="p">:</span>
  <span class="nt">&lt;volume name&gt;</span><span class="p">:</span>
    <span class="nt">path</span><span class="p">:</span> <span class="s">&quot;/etc/mountpath&quot;</span>
    <span class="nt">efs</span><span class="p">:</span>
      <span class="l l-Scalar l-Scalar-Plain">...</span>
</code></pre></div></p>
<p><span class="parent-field">storage.volumes.</span><a id="volume" href="#volume" class="field"><code>&lt;volume&gt;</code></a> <span class="type">Map</span><br />
ボリュームの設定を指定します。</p>
<p><span class="parent-field">storage.volumes.<code>&lt;volume&gt;</code>.</span><a id="path" href="#path" class="field"><code>path</code></a> <span class="type">String</span><br />
必須設定項目です。ボリュームをマウントするコンテナ内のパスを指定します。指定する値は２４２文字未満かつ <code>a-zA-Z0-9.-_/</code> の文字種である必要があります。</p>
<p><span class="parent-field">storage.volumes.<code>&lt;volume&gt;</code>.</span><a id="read_only" href="#read-only" class="field"><code>read_only</code></a> <span class="type">Boolean</span><br />
任意設定項目で、デフォルト値は <code>true</code> です。ボリュームを読み取り専用とするかどうかを指定します。<code>false</code> に設定した場合、コンテナにファイルシステムへの <code>elasticfilesystem:ClientWrite</code> 権限が付与され、それによりボリュームへ書き込めるようになります。</p>
<p><span class="parent-field">storage.volumes.<code>&lt;volume&gt;</code>.</span><a id="efs" href="#efs" class="field"><code>efs</code></a> <span class="type">Boolean or Map</span><br />
詳細な EFS 設定を指定します。Boolean 値による指定、あるいは <code>uid</code> と <code>gid</code> サブフィールドのみを指定した場合に、EFS ファイルシステムと Service 専用の EFS アクセスポイントが作成されます。</p>
<div class="highlight"><pre><span></span><code><span class="l l-Scalar l-Scalar-Plain">// Boolean 値を指定する場合</span>
<span class="l l-Scalar l-Scalar-Plain">efs</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="l l-Scalar l-Scalar-Plain">// POSIX uid/gid を指定する場合</span>
<span class="nt">efs</span><span class="p">:</span>
  <span class="nt">uid</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10000</span>
  <span class="nt">gid</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">110000</span>
</code></pre></div>
<p><span class="parent-field">storage.volumes.<code>&lt;volume&gt;</code>.efs.</span><a id="id" href="#id" class="field"><code>id</code></a> <span class="type">String</span><br />
必須設定項目です。マウントする EFS ファイルシステムの ID を指定します。</p>
<p><span class="parent-field">storage.volumes.<code>&lt;volume&gt;</code>.efs.id.</span><a id="from_cfn" href="#from_cfn" class="field"><code>from_cfn</code></a> <span class="type">String</span> <span class="version"><a href="../../../blogs/release-v130/#deployment-actions">v1.30.0</a> にて追加</span><br />
<a href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/using-cfn-stack-exports.html">CloudFormation スタック出力値のエクスポート</a>の名前を指定します。</p>
<p><span class="parent-field">storage.volumes.<code>&lt;volume&gt;</code>.efs.</span><a id="root_dir" href="#root-dir" class="field"><code>root_dir</code></a> <span class="type">String</span>
任意設定項目で、デフォルト値は <code>/</code> です。EFS ファイルシステム内のどのパスをマウントするボリュームのルートとするのかを指定します。指定する値は 255 文字未満かつ <code>a-zA-Z0-9.-_/</code> の文字種である必要があります。EFS アクセスポイントを利用する場合、本設定値に空もしくは <code>/</code> を指定し、かつ <code>auth.iam</code> の設定値が <code>true</code> となっている必要があります。</p>
<p><span class="parent-field">storage.volumes.<code>&lt;volume&gt;</code>.efs.</span><a id="uid" href="#uid" class="field"><code>uid</code></a> <span class="type">Uint32</span>
任意設定項目で、<code>gid</code> とともに指定する必要があります。また、<code>root_dir</code>、<code>auth</code>、<code>id</code> とともに指定することはできません. Copilot 管理の EFS ファイルシステムに対する EFS アクセスポイントを作成する際の POSIX UID として利用されます。</p>
<p><span class="parent-field">storage.volumes.<code>&lt;volume&gt;</code>.efs.</span><a id="gid" href="#gid" class="field"><code>gid</code></a> <span class="type">Uint32</span>
任意設定項目で、<code>uid</code> とともに指定する必要があります。また、<code>root_dir</code>、<code>auth</code>、<code>id</code> とともに指定することはできません. Copilot 管理の EFS ファイルシステムに対する EFS アクセスポイントを作成する際の POSIX GID として利用されます。</p>
<p><span class="parent-field">storage.volumes.<code>&lt;volume&gt;</code>.efs.</span><a id="auth" href="#auth" class="field"><code>auth</code></a> <span class="type">Map</span><br />
EFS に関連する認可設定を指定します。</p>
<p><span class="parent-field">storage.volumes.<code>&lt;volume&gt;</code>.efs.auth.</span><a id="iam" href="#iam" class="field"><code>iam</code></a> <span class="type">Boolean</span><br />
任意設定項目で、デフォルトは <code>true</code> です。EFS リソースへのアクセスに IAM による認可を利用するかどうかを指定します。</p>
<p><span class="parent-field">storage.volumes.<code>&lt;volume&gt;</code>.efs.auth.</span><a id="access_point_id" href="#access-point-id" class="field"><code>access_point_id</code></a> <span class="type">String</span><br />
任意設定項目で、デフォルトは <code>""</code> です。利用する EFS アクセスポイントの ID を指定します。EFS アクセスポイントを利用する場合、<code>root_dir</code> の設定値に空もしくは <code>/</code> を指定しており、かつ本設定値が <code>true</code> となっている必要があります。</p>
<div class="separator"></div>

<p><a id="publish" href="#publish" class="field"><code>publish</code></a> <span class="type">Map</span><br />
<code>publish</code> セクションを使用すると、サービスは 1 つまたは複数の SNS トピックにメッセージをパブリッシュできます。</p>
<div class="highlight"><pre><span></span><code><span class="nt">publish</span><span class="p">:</span>
  <span class="nt">topics</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">orderEvents</span>
</code></pre></div>
<p>上記の例では、この Manifest は、Copilot の Environment にデプロイされた他の Worker Service がサブスクライブできる <code>orderEvents</code> という名前の SNS トピックを定義しています。<code>COPILOT_SNS_TOPIC_ARNS</code> という名前の環境変数が、JSON 文字列としてワークロードに設定されます。  </p>
<p>JavaScriptでは、次のように記述できます。
<div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="p">{</span><span class="nx">orderEvents</span><span class="p">}</span> <span class="o">=</span> <span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">COPILOT_SNS_TOPIC_ARNS</span><span class="p">)</span>
</code></pre></div>
詳しくは、<a href="../../developing/publish-subscribe/">パブリッシュ / サブスクライブ</a>のページをご覧ください。</p>
<p><span class="parent-field">publish.</span><a id="publish-topics" href="#publish-topics" class="field"><code>topics</code></a> <span class="type">Array of topics</span><br />
<a href="#publish-topics-topic"><code>topic</code></a> オブジェクトのリスト。</p>
<p><span class="parent-field">publish.topics.</span><a id="publish-topics-topic" href="#publish-topics-topic" class="field"><code>topic</code></a> <span class="type">Map</span><br />
1 つの SNS トピックの設定を保持します。</p>
<p><span class="parent-field">publish.topics.topic.</span><a id="publish-topics-topic-name" href="#publish-topics-topic-name" class="field"><code>name</code></a> <span class="type">String</span>
必須項目。SNS トピックの名前です。大文字、小文字、数字、ハイフン、アンダースコアのみを含む必要があります。</p>
<p><span class="parent-field">publish.topics.topic.</span><a id="publish-topics-topic-fifo" href="#publish-topics-topic-fifo" class="field"><code>fifo</code></a> <span class="type">Boolean or Map</span>
FIFO (first in, first out) SNS トピック設定。
<code>true</code> と指定した場合、 Copilot は FIFO でトピックを作成します。</p>
<div class="highlight"><pre><span></span><code><span class="nt">publish</span><span class="p">:</span>
  <span class="nt">topics</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">mytopic</span>
      <span class="nt">fifo</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>
<p>また, SNS FIFO トピックの高度な設定も可能です。
<div class="highlight"><pre><span></span><code><span class="nt">publish</span><span class="p">:</span>
  <span class="nt">topics</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">mytopic</span>
      <span class="nt">fifo</span><span class="p">:</span>
        <span class="nt">content_based_deduplication</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div></p>
<p><span class="parent-field">publish.topics.topic.fifo.</span><a id="publish-topics-topic-fifo-content-based-deduplication" href="#publish-topics-topic-fifo-content-based-deduplication" class="field"><code>content_based_deduplication</code></a> <span class="type">Boolean</span>
パブリッシュされたメッセージごとにメッセージ本文が一意であることが保証されている場合、SNS FIFO トピックの重複排除を有効化できます。</p>
<div class="separator"></div>

<p><a id="logging" href="#logging" class="field"><code>logging</code></a> <span class="type">Map</span><br />
logging セクションには、ログ設定を含みます。このセクションでは、コンテナの <a href="https://docs.aws.amazon.com/ja_jp/AmazonECS/latest/developerguide/using_firelens.html">FireLens</a> ログドライバ用のパラメータを設定できます。(設定例は<a href="../../developing/sidecars/#sidecar-patterns">こちら</a>)</p>
<p><span class="parent-field">logging.</span><a id="retention" href="#logging-retention" class="field"><code>retention</code></a> <span class="type">Integer</span><br />
任意項目。 ログイベントを保持する日数。設定可能な値については、<a href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-resource-logs-loggroup.html#cfn-logs-loggroup-retentionindays">こちら</a>を確認してください。省略した場合、デフォルトの 30 が設定されます。</p>
<p><span class="parent-field">logging.</span><a id="logging-image" href="#logging-image" class="field"><code>image</code></a> <span class="type">Map</span><br />
任意項目。使用する Fluent Bit のイメージ。デフォルト値は <code>public.ecr.aws/aws-observability/aws-for-fluent-bit:stable</code>。</p>
<p><span class="parent-field">logging.</span><a id="logging-destination" href="#logging-destination" class="field"><code>destination</code></a> <span class="type">Map</span><br />
任意項目。FireLens ログドライバーにログを送信するときの設定。</p>
<p><span class="parent-field">logging.</span><a id="logging-enableMetadata" href="#logging-enableMetadata" class="field"><code>enableMetadata</code></a> <span class="type">Map</span><br />
任意項目。ログに ECS メタデータを含めるかどうか。デフォルトは <code>true</code>。</p>
<p><span class="parent-field">logging.</span><a id="logging-secretOptions" href="#logging-secretOptions" class="field"><code>secretOptions</code></a> <span class="type">Map</span><br />
任意項目。ログの設定に渡す秘密情報です。</p>
<p><span class="parent-field">logging.</span><a id="logging-configFilePath" href="#logging-configFilePath" class="field"><code>configFilePath</code></a> <span class="type">Map</span><br />
任意項目。カスタムの Fluent Bit イメージ内の設定ファイルのフルパス。</p>
<p><span class="parent-field">logging.</span><a id="logging-envFile" href="#logging-envFile" class="field"><code>env_file</code></a> <span class="type">String</span><br />
ロギングサイドカーコンテナに設定する環境変数を含むファイルのワークスペースのルートからのパス。環境変数ファイルに関する詳細については、<a href="https://docs.aws.amazon.com/ja_jp/AmazonECS/latest/developerguide/taskdef-envfiles.html#taskdef-envfiles-considerations">環境変数ファイルの指定に関する考慮事項</a>を確認してください。</p>
<div class="separator"></div>

<p><a id="observability" href="#observability" class="field"><code>observability</code></a> <span class="type">Map</span>    <br />
<code>observability</code> セクションは、Service の現在の状態を測定する方法を設定することができます。現在のところ、トレース設定のみサポートされています。</p>
<p>詳細については、<a href="../../developing/observability/">observability</a> のページを参照してください。</p>
<p><span class="parent-field">observability.</span><a id="observability-tracing" href="#observability-tracing" class="field"><code>tracing</code></a> <span class="type">String</span>  <br />
トレースに使用するベンダー。現在、<code>awsxray</code> のみサポートしています。</p>
<div class="separator"></div>

<p><a id="taskdef_overrides" href="#taskdef_overrides" class="field"><code>taskdef_overrides</code></a> <span class="type">Array of Rules</span><br />
<code>taskdef_overrides</code> セクションでは、ECS のタスク定義のオーバーライドルールを適用できます (例は<a href="../../developing/overrides/taskdef-overrides/#examples">こちら</a>)。</p>
<p><span class="parent-field">taskdef_overrides.</span><a id="taskdef_overrides-path" href="#taskdef_overrides-path" class="field"><code>path</code></a> <span class="type">String</span>
必須設定項目です。オーバーライドするタスク定義のフィールドのパス。</p>
<p><span class="parent-field">taskdef_overrides.</span><a id="taskdef_overrides-value" href="#taskdef_overrides-value" class="field"><code>value</code></a> <span class="type">Any</span>
必須設定項目です。オーバーライドするタスク定義のフィールドの値。</p>
<div class="separator"></div>

<p><a id="environments" href="#environments" class="field"><code>environments</code></a> <span class="type">Map</span><br />
<code>environments</code> セクションでは、Manifest 内の任意の設定値を Environment ごとにオーバーライドできます。上部記載の Manifest 例では <code>count</code> パラメータをオーバーライドすることで 'prod' Environment で実行されるタスク数を ２ に設定し、'staging' Environment で実行される Fargate Spot capacity によるタスク数を ２ に設定します。</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        

<!-- Application footer -->
<footer class="md-footer">
  <!-- Further information -->
  <div class="md-footer-meta md-typeset" style="background-color: #fff;">
    <div class="md-footer-meta__inner md-grid" style="background-color: #fff;">

      <!-- Copyright and theme information -->
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight" style="color: rgb(38, 38, 38);">
            Copyright &copy; 2023 Amazon
          </div>
        
        <div style="color: rgb(38, 38, 38);">
          Made with
          <a
                  href="https://squidfunk.github.io/mkdocs-material/"
                  target="_blank" rel="noopener"
                  style="color: black;"
          >
            Material for MkDocs
          </a>
        </div>
      </div>

      <!-- Social links -->
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["tabs", "instant", "navigation.tabs"], "translations": {"clipboard.copy": "\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u3078\u30b3\u30d4\u30fc", "clipboard.copied": "\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\s\\-\u3000\u3001\u3002\uff0c\uff0e]+", "search.placeholder": "\u691c\u7d22", "search.result.placeholder": "\u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044", "search.result.none": "\u4f55\u3082\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f", "search.result.one": "1\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.other": "#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.more.one": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3082\u30461\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.more.other": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3042\u3068#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.term.missing": "\u691c\u7d22\u306b\u542b\u307e\u308c\u306a\u3044", "select.version.title": "Select version"}, "search": "../../../../assets/javascripts/workers/search.fcfe8b6d.min.js", "version": null}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.b1047164.min.js"></script>
      
    
  </body>
</html>